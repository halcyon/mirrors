<!DOCTYPE html>
<html>
  
<!-- Mirrored from beautifulracket.com/explainer/equality.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 16 Mar 2017 05:46:54 GMT -->
<head>
    <meta charset="UTF-8">
    <title>Beautiful Racket: Equality</title>
    <link rel="stylesheet" type="text/css" media="all" href="../styles.css"/>
    <script type="text/javascript" src="../functions.js"></script>
    <script type="text/javascript" src="../clipboard.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74684045-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
<body>
<div id="alert">Thank you for your comment</div>
    <div id="doc"><h3 class="dept" anchorize="false"><a href="../index.html">Beau­ti­ful Racket</a> / <a href="../index.html#explainers">explain­ers</a></h3><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;equality&quot;)"></div><h1 anchor="equality" id="equality" hyphens="none">Equality</h1></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_u8eju&quot;)"></div><p id="a_u8eju">Racket has mul­ti­ple func­tions for test­ing the equal­ity of two items. Why more than one? So that spe­cial­ized equal­ity func­tions can be opti­mized to run faster. But if you’re not com­par­ing data types that are appro­pri­ate, you’ll get inac­cu­rate results. Choose with care.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_c4h6S&quot;)"></div><p id="a_c4h6S"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="docs" hyphens="none">equal?</a> gives the right answer for all data types. When in doubt, use this. It can be slower, how­ever, because it dili­gently inspects val­ues, includ­ing the val­ues enclosed in two lists. These com­par­isons are all true:</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_JXagb&quot;)"></div><div class="highlight-container" id="a_JXagb"><div id="code_43" form="false" decode="exclude" style="font-size:0;width:0;height:0">(equal? "foobar" (string-append "foo" "bar")) ; #t<br/>(equal? '(1 2 3 4) (append '(1 2) '(3 4))) ; #t<br/>(equal? 42 (* 6 7)) ; #t<br/>(equal? 'symbol (string-&gt;symbol "symbol")) ; #t</div><div class="highlight" form="false" id="a_jRBEG"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="docs" hyphens="none">equal?</a></span> <span class="s2">"foobar"</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="docs" hyphens="none">string-append</a></span> <span class="s2">"foo"</span> <span class="s2">"bar"</span><span class="p">))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="docs" hyphens="none">equal?</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="docs" hyphens="none">append</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">)))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="docs" hyphens="none">equal?</a></span> <span class="mi">42</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="docs" hyphens="none">*</a></span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="docs" hyphens="none">equal?</a></span> <span class="o">&#39;</span><span class="ss">symbol</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._string-~3esymbol))" class="docs" hyphens="none">string-&gt;symbol</a></span> <span class="s2">"symbol"</span><span class="p">))</span> <span class="c1">; #t</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk" data-clipboard-target="#code_43" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div anchorize="false" style="height:1em"></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Peyx1&quot;)"></div><p id="a_Peyx1"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a> is mostly restricted to sym­bols and objects. <span class="my-code" decode="exclude">eq?</span> can be much faster than <span class="my-code" decode="exclude">equal?</span> because it doesn’t actu­ally inspect the val­ues of the two items. Rather, it sim­ply checks if the items refer to the same chunk of mem­ory. (Those famil­iar with mem­ory oper­a­tions might know this as <a class="glossary" href="../appendix/glossary.html#pointer-comparison"><span class="glossary-link-text">pointer com­par­i­son</span></a>.)</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_1PXgh&quot;)"></div><div class="highlight-container" id="a_1PXgh"><div id="code_44" form="false" decode="exclude" style="font-size:0;width:0;height:0">(eq? "foobar" (string-append "foo" "bar")) ; #f<br/>(eq? '(1 2 3 4) (append '(1 2) '(3 4))) ; #f<br/>(eq? 'symbol (string-&gt;symbol "symbol")) ; #t</div><div class="highlight" form="false" id="a_neokY"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="s2">"foobar"</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="docs" hyphens="none">string-append</a></span> <span class="s2">"foo"</span> <span class="s2">"bar"</span><span class="p">))</span> <span class="c1">; #f</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="docs" hyphens="none">append</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">)))</span> <span class="c1">; #f</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="o">&#39;</span><span class="ss">symbol</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._string-~3esymbol))" class="docs" hyphens="none">string-&gt;symbol</a></span> <span class="s2">"symbol"</span><span class="p">))</span> <span class="c1">; #t</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk1" data-clipboard-target="#code_44" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_nEhKw&quot;)"></div><p id="a_nEhKw">Its reliance on pointer com­par­i­son, how­ever, is why <span class="my-code" decode="exclude">eq?</span> is lim­ited to <a class="glossary" href="../appendix/glossary.html#symbol"><span class="glossary-link-text">sym­bols</span></a> and a hand­ful of other data types that are <a class="glossary" href="../appendix/glossary.html#interned"><span class="glossary-link-text">interned</span></a> in Racket. Con­versely, it’s also why you’ll see sym­bols cho­sen for sit­u­a­tions where speedy com­par­isons are needed, because then you can use <span class="my-code" decode="exclude">eq?</span>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_jXmGh&quot;)"></div><p id="a_jXmGh">Take extra care with <span class="my-code" decode="exclude">eq?</span>, which can lead new­com­ers astray with its abil­ity to give seem­ingly accu­rate results in sim­ple test cases (like num­bers and strings), then seem­ingly fail when the input gets more com­plex. In those cases, <span class="my-code" decode="exclude">eq?</span> is right; your expec­ta­tions are wrong.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_JXzeQ&quot;)"></div><div class="highlight-container" id="a_JXzeQ"><div id="code_45" form="false" decode="exclude" style="font-size:0;width:0;height:0">(eq? "foobar" "foobar") ; #t, but ...<br/>(eq? "foobar" (string-append "foo" "bar")) ; #f<br/>(eq? 42 (* 6 7)) ; #t, but ...<br/>(eq? (expt 9 999) (expt 9 999)) ; #f</div><div class="highlight" form="false" id="a_WjdCF"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="s2">"foobar"</span> <span class="s2">"foobar"</span><span class="p">)</span> <span class="c1">; #t, but ...</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="s2">"foobar"</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="docs" hyphens="none">string-append</a></span> <span class="s2">"foo"</span> <span class="s2">"bar"</span><span class="p">))</span> <span class="c1">; #f</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="mi">42</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="docs" hyphens="none">*</a></span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span> <span class="c1">; #t, but ...</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="docs" hyphens="none">eq?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" class="docs" hyphens="none">expt</a></span> <span class="mi">9</span> <span class="mi">999</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" class="docs" hyphens="none">expt</a></span> <span class="mi">9</span> <span class="mi">999</span><span class="p">))</span> <span class="c1">; #f</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk2" data-clipboard-target="#code_45" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div anchorize="false" style="height:1em"></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Zh52o&quot;)"></div><p id="a_Zh52o"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eqv~3f))" class="docs" hyphens="none">eqv?</a> is like <span class="my-code" decode="exclude">eq?</span>, but han­dles num­bers and char­ac­ters con­sis­tently.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_MnMpi&quot;)"></div><div class="highlight-container" id="a_MnMpi"><div id="code_46" form="false" decode="exclude" style="font-size:0;width:0;height:0">(eqv? 'symbol (string-&gt;symbol "symbol")) ; #t<br/>(eqv? 42 (* 6 7)) ; #t<br/>(eqv? (expt 9 999) (expt 9 999)) ; #t, but was #f with `eq?`</div><div class="highlight" form="false" id="a_Glphs"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eqv~3f))" class="docs" hyphens="none">eqv?</a></span> <span class="o">&#39;</span><span class="ss">symbol</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/symbols.html#(def._((quote._~23~25kernel)._string-~3esymbol))" class="docs" hyphens="none">string-&gt;symbol</a></span> <span class="s2">"symbol"</span><span class="p">))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eqv~3f))" class="docs" hyphens="none">eqv?</a></span> <span class="mi">42</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="docs" hyphens="none">*</a></span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._eqv~3f))" class="docs" hyphens="none">eqv?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" class="docs" hyphens="none">expt</a></span> <span class="mi">9</span> <span class="mi">999</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._expt))" class="docs" hyphens="none">expt</a></span> <span class="mi">9</span> <span class="mi">999</span><span class="p">))</span> <span class="c1">; #t, but was #f with `eq?`</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk3" data-clipboard-target="#code_46" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div anchorize="false" style="height:1em"></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_08cxq&quot;)"></div><p id="a_08cxq"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" class="docs" hyphens="none">=</a> is like <span class="my-code" decode="exclude">eqv?</span>, but lim­ited to num­bers, and can be faster than <span class="my-code" decode="exclude">equal?</span>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_UQ9tD&quot;)"></div><div class="highlight-container" id="a_UQ9tD"><div id="code_47" form="false" decode="exclude" style="font-size:0;width:0;height:0">(= 42 (* 6 7)) ; #t<br/>(= '(1 2 3 4) (append '(1 2) '(3 4))) ; error</div><div class="highlight" form="false" id="a_P5DlD"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" class="docs" hyphens="none">=</a></span> <span class="mi">42</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="docs" hyphens="none">*</a></span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span> <span class="c1">; #t</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" class="docs" hyphens="none">=</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="docs" hyphens="none">append</a></span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">)))</span> <span class="c1">; error</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk4" data-clipboard-target="#code_47" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;further&quot;)"></div><h3 anchor="further" class="subhead" id="further"><a href="#further">Fur­ther</a></h3></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_EAu9W&quot;)"></div><p id="a_EAu9W"><a class="explainer" href="stringlike-values.html">String­like val­ues</a></p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_L6DEr&quot;)"></div><p id="a_L6DEr"><a class="explainer" href="numbers.html">Num­bers</a></p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_pXcj1&quot;)"></div><p id="a_pXcj1"><span><a href="http://docs.racket-lang.org/reference/booleans.html">Booleans and Equal­ity</a> in the Racket Ref­er­ence</span></p></div></li></ul></div>
    <a class="nav-left" href="data-structures.html">← prev</a>
    <a class="nav-right" href="errors-and-exceptions.html">next →</a>




</body>

<script type="text/javascript">



function show_all_forms() {
 var elems = document.getElementsByClassName('has_form');
 for (var i = 0 ; i < elems.length ; i++) {
  toggle_form(elems[i].id);
 }
}

// for debugging forms only: uncomment next line
// show_all_forms();

// sets up copy-to-clipboard buttons in code boxes
var clipboard = new Clipboard('.copy-button');
clipboard.on('success', function(e) {console.log(e);});
clipboard.on('error', function(e) {console.log(e);});
</script>