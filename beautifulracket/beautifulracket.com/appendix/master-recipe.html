<!DOCTYPE html>
<html>
  
<!-- Mirrored from beautifulracket.com/appendix/master-recipe.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 16 Mar 2017 05:46:56 GMT -->
<head>
    <meta charset="UTF-8">
    <title>Beautiful Racket: Master recipe</title>
    <link rel="stylesheet" type="text/css" media="all" href="../styles.css"/>
    <script type="text/javascript" src="../functions.js"></script>
    <script type="text/javascript" src="../clipboard.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74684045-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
<body>
<div id="alert">Thank you for your comment</div>
    <div id="doc"><h3 class="dept" anchorize="false"><a href="../index.html">Beau­ti­ful Racket</a> / <a href="../index.html#appendix">appen­dix</a></h3><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;master-recipe&quot;)"></div><h1 anchor="master-recipe" id="master-recipe" hyphens="none">Master recipe</h1></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_dvxEg&quot;)"></div><p id="a_dvxEg">This is a sum­mary of the major steps in cre­at­ing a new lan­guage in Racket. This recipe is not “mas­ter” in the sense of “com­pre­hen­sive.” Rather, it’s a core process that you can cus­tomize as you wish—except for a few points that are non-nego­tiable, which are sig­naled with the word <strong><em>must</em></strong>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Hsyvz&quot;)"></div><p id="a_Hsyvz">This recipe assumes famil­iar­ity with Racket’s lan­guage-mak­ing work­flow and ter­mi­nol­ogy. If you want to learn about that work­flow, start with the <a href="../index.html#tutorials">tuto­ri­als</a>, not here.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_3E3KQ&quot;)"></div><p id="a_3E3KQ">Let’s assume your new lan­guage is called <span class="my-code" decode="exclude">dsl</span>. The rest of the recipe will use <span class="my-code" decode="exclude">#lang dsl</span> as an exam­ple. But the process is anal­o­gous for any <span class="my-code" decode="exclude">#lang dsl/dialect</span>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_t9AGn&quot;)"></div><p id="a_t9AGn">The pseudocode uses <span class="my-code" decode="exclude">#lang br</span>. But you can use any Racket lan­guage to imple­ment your lan­guage, as long your code fol­lows the other require­ments set out below.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;setting-up-a-language-project&quot;)"></div><h3 anchor="setting-up-a-language-project" class="subhead" id="setting-up-a-language-project"><a href="#setting-up-a-language-project">Set­ting up a lan­guage project</a></h3></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_yvVeP&quot;)"></div><p id="a_yvVeP">When work­ing on a lan­guage project, it’s con­ve­nient to be able to refer to mod­ules within the pack­age global names like <span class="my-code" decode="exclude">dsl/module-name</span>, and on <a href="../explainer/lang-line.html">the <span class="my-code" decode="exclude">#lang</span> line</a> as <span class="my-code" decode="exclude">#lang dsl</span>. To do this, start by installing your lan­guage project as a <a class="glossary" href="glossary.html#package"><span class="glossary-link-text">pack­age</span></a>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_VNWIH&quot;)"></div><p id="a_VNWIH">Two options:</p></div><ol><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_LpOg0&quot;)"></div><p id="a_LpOg0">Within your <span class="my-code" decode="exclude">path/to/source</span>, cre­ate a project direc­tory for the lan­guage called <span class="my-code" decode="exclude">dsl</span>. Switch into the new direc­tory and use <span class="my-code" decode="exclude">raco pkg install</span> to add it to your local Racket instal­la­tion as a pack­age.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_xwcyr&quot;)"></div><div class="highlight-container" id="a_xwcyr"><div id="code_43" form="false" decode="exclude" style="font-size:0;width:0;height:0">&gt; cd path/to/source<br/>&gt; mkdir dsl<br/>&gt; cd dsl<br/>&gt; raco pkg install</div><div class="highlight" form="false" id="a_0KVOo"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre>&gt; cd path/to/source
&gt; mkdir dsl
&gt; cd dsl
&gt; raco pkg install
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk" data-clipboard-target="#code_43" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_U0Y5C&quot;)"></div><p id="a_U0Y5C">Alter­na­tively: at the com­mand line, switch to your <span class="my-code" decode="exclude">path/to/source</span> and use <span class="my-code" decode="exclude">raco pkg new dsl</span>, which will cre­ate the <span class="my-code" decode="exclude">dsl</span> sub­di­rec­tory and stub out other files that will be use­ful in the pack­age (includ­ing doc­u­men­ta­tion and con­fig­u­ra­tion).</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_wK9rn&quot;)"></div><div class="highlight-container" id="a_wK9rn"><div id="code_44" form="false" decode="exclude" style="font-size:0;width:0;height:0">&gt; cd path/to/source<br/>&gt; raco pkg new dsl<br/>&gt; cd dsl<br/>&gt; raco pkg install</div><div class="highlight" form="false" id="a_RiJI8"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre>&gt; cd path/to/source
&gt; raco pkg new dsl
&gt; cd dsl
&gt; raco pkg install
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk1" data-clipboard-target="#code_44" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></li></ol><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;the-boot-module&quot;)"></div><h3 anchor="the-boot-module" class="subhead" id="the-boot-module"><a href="#the-boot-module">The boot mod­ule</a></h3></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_fhU5J&quot;)"></div><p id="a_fhU5J">The boot mod­ule is the first mod­ule Racket loads when run­ning a pro­gram in your lan­guage.</p></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_tdCuk&quot;)"></div><p id="a_tdCuk">If your lan­guage is invoked as <span class="my-code" decode="exclude">#lang dsl</span>, its boot mod­ule will be <span class="my-code" decode="exclude">"dsl/main.rkt"</span>.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Tx7P9&quot;)"></div><p id="a_Tx7P9">If your lan­guage is invoked as <span class="my-code" decode="exclude">#lang dsl/dialect</span>, its boot mod­ule will be <span class="my-code" decode="exclude">"dsl/dialect.rkt"</span>. (Cau­tion: the boot mod­ule will <em>not</em> be <span class="my-code" decode="exclude">"dsl/dialect/main.rkt"</span>.)</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Keoch&quot;)"></div><p id="a_Keoch">A lan­guage can have any num­ber of dialects liv­ing in the same project direc­tory, with the boot mod­ules fol­low­ing this nam­ing con­ven­tion.</p></div></li></ul><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;the-reader&quot;)"></div><h3 anchor="the-reader" class="subhead" id="the-reader"><a href="#the-reader">The reader</a></h3></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_yn4bD&quot;)"></div><p id="a_yn4bD">As the first step in run­ning any pro­gram, Racket invokes the <a class="glossary" href="glossary.html#reader"><span class="glossary-link-text">reader</span></a> for the lan­guage. The reader con­verts <a class="glossary" href="glossary.html#source-code"><span class="glossary-link-text">source code</span></a> (= a string of char­ac­ters in a <a class="glossary" href="glossary.html#source-file"><span class="glossary-link-text">source file</span></a>) into <a class="glossary" href="glossary.html#s-expression"><span class="glossary-link-text">S-expres­sions</span></a> (= Racket-style syn­tac­tic forms).</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_o67Hb&quot;)"></div><p id="a_o67Hb">To start the reader, Racket calls the <span class="my-code" decode="exclude">read-syntax</span> func­tion for the lan­guage. Racket looks for this func­tion in the <span class="my-code" decode="exclude">reader</span> sub­mod­ule of the boot mod­ule of the <span class="my-code" decode="exclude">#lang</span>, which <strong><em>must</em></strong> <span class="my-code" decode="exclude">provide</span> it. For instance:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_5dFpc&quot;)"></div><div class="highlight-container" id="a_5dFpc"><div id="code_45" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (provide read-syntax)<br/>  ···)</div><div class="highlight" form="false" id="a_MeODU"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk2" data-clipboard-target="#code_45" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_XcCT8&quot;)"></div><p id="a_XcCT8"><span class="my-code" decode="exclude">read-syntax</span> can either be defined within the <span class="my-code" decode="exclude">reader</span> sub­mod­ule:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_WACYf&quot;)"></div><div class="highlight-container" id="a_WACYf"><div id="code_46" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (provide read-syntax)<br/>  (define (read-syntax name port)<br/>    ···))</div><div class="highlight" form="false" id="a_iRdEo"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span> <span class="n">name</span> <span class="n">port</span><span class="p">)</span>
    <span class="n">···</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk3" data-clipboard-target="#code_46" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_vKNUp&quot;)"></div><p id="a_vKNUp">Or imported from else­where:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_iKCCL&quot;)"></div><div class="highlight-container" id="a_iKCCL"><div id="code_47" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (provide read-syntax)<br/>  (require module/that/exports/read-syntax))</div><div class="highlight" form="false" id="a_o37kc"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="docs" hyphens="none">require</a></span> <span class="n">module/that/exports/read-syntax</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk4" data-clipboard-target="#code_47" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_fNplD&quot;)"></div><p id="a_fNplD"><span class="my-code" decode="exclude">read-syntax</span> <strong><em>must</em></strong> accept two input argu­ments: a <em>source name</em> (which will hold the loca­tion of the source—e.g., for file input, the name would be a path) and an input <a class="glossary" href="glossary.html#port"><span class="glossary-link-text">port</span></a> (point­ing at the source file). <span class="my-code" decode="exclude">read-syntax</span> should read its data from the port. <span class="tooltip" onclick="this.classList.toggle('tooltip_visible')"> + <span class="tooltip-inner">In prin­ci­ple, it’s pos­si­ble to read directly from a source name when it’s a path. But this is unre­li­able, because it assumes the input source is a file. Maybe it’s not. By con­trast, the port argu­ment always con­tains the source data, regard­less of the under­ly­ing input type.</span></span>  In pseudocode:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_HW9aJ&quot;)"></div><div class="highlight-container" id="a_HW9aJ"><div id="code_48" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (provide read-syntax)<br/>  (define (read-syntax name port)<br/>    (define s-exprs (read-code-from port))<br/>    ···))</div><div class="highlight" form="false" id="a_YmNrA"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span> <span class="n">name</span> <span class="n">port</span><span class="p">)</span>
    <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="n">s-exprs</span> <span class="p">(</span><span class="n">read-code-from</span> <span class="n">port</span><span class="p">))</span>
    <span class="n">···</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk5" data-clipboard-target="#code_48" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_nKHH1&quot;)"></div><p id="a_nKHH1"><span class="my-code" decode="exclude">read-syntax</span> <strong><em>must</em></strong> return one value: code for a <a class="glossary" href="glossary.html#module"><span class="glossary-link-text">mod­ule</span></a> expres­sion, rep­re­sented as a <a class="glossary" href="glossary.html#syntax-object"><span class="glossary-link-text">syn­tax object</span></a>. Typ­i­cally, the con­verted S-expres­sions from the source file are inserted into this syn­tax object. This syn­tax object <strong><em>must</em></strong> have no iden­ti­fier <a class="glossary" href="glossary.html#binding"><span class="glossary-link-text">bind­ings</span></a>. This mod­ule code <strong><em>must</em></strong> include a ref­er­ence to the <a class="glossary" href="glossary.html#expander"><span class="glossary-link-text">expander</span></a> that will pro­vide the ini­tial set of bind­ings when the mod­ule code is eval­u­ated. In pseudocode:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_h9Xtu&quot;)"></div><div class="highlight-container" id="a_h9Xtu"><div id="code_49" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (provide read-syntax)<br/>  (define (read-syntax name port)<br/>    (define s-exprs (read-code-from port))<br/>    (strip-bindings<br/>     #`(module dsl-mod-name dsl/expander<br/>         #,@s-exprs))))</div><div class="highlight" form="false" id="a_d6unf"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span> <span class="n">name</span> <span class="n">port</span><span class="p">)</span>
    <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="n">s-exprs</span> <span class="p">(</span><span class="n">read-code-from</span> <span class="n">port</span><span class="p">))</span>
    <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/br/index.html#(def._((lib._br/syntax..rkt)._strip-bindings))" class="docs" hyphens="none">strip-bindings</a></span>
     <span class="o">#`</span><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
         <span class="o">#,@</span><span class="n">s-exprs</span><span class="p">))))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk6" data-clipboard-target="#code_49" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_kOmmY&quot;)"></div><p id="a_kOmmY">Racket takes the mod­ule expres­sion returned from <span class="my-code" decode="exclude">read-syntax</span> and uses it to replace the code in the source file. So a source file that looks like this:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_lLhEC&quot;)"></div><div class="highlight-container" id="a_lLhEC"><div id="code_50" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang dsl<br/>dsl source code;<br/>···</div><div class="highlight" form="false" id="a_FMqYE"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="source"><pre>#lang dsl
dsl source code;
···
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk7" data-clipboard-target="#code_50" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_2kdQh&quot;)"></div><p id="a_2kdQh">Becomes this:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_U9YGI&quot;)"></div><div class="highlight-container" id="a_U9YGI"><div id="code_51" form="false" decode="exclude" style="font-size:0;width:0;height:0">(module dsl-mod-name dsl/expander<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_e8o68"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk8" data-clipboard-target="#code_51" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_v8YYD&quot;)"></div><p id="a_v8YYD">Eval­u­a­tion of this mod­ule expres­sion con­tin­ues from here, start­ing by import­ing bind­ings from the expander.</p></div></li></ul><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;optional-the-parser-and-tokenizer&quot;)"></div><h3 anchor="optional-the-parser-and-tokenizer" class="subhead" id="optional-the-parser-and-tokenizer"><a href="#optional-the-parser-and-tokenizer">Optional: the parser &amp; tok­enizer</a></h3></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_cUMBZ&quot;)"></div><p id="a_cUMBZ">It’s com­mon, but not manda­tory, for <span class="my-code" decode="exclude">read-syntax</span> to rely on two helper func­tions: a parser and a tok­enizer.</p></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_1Pcdg&quot;)"></div><p id="a_1Pcdg">The <a class="glossary" href="glossary.html#tokenizer"><span class="glossary-link-text">tok­enizer</span></a> reads char­ac­ters from the input port and con­verts them to <a class="glossary" href="glossary.html#token"><span class="glossary-link-text">tokens</span></a>, which are the small­est mean­ing­ful units of source code.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_ibLTK&quot;)"></div><p id="a_ibLTK">You can write a tok­enizer by hand. You can also use a helper func­tion called a <a class="glossary" href="glossary.html#lexer"><span class="glossary-link-text">lexer</span></a> that uses reg­exp-style rules to con­vert source code into tokens.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Iz6nk&quot;)"></div><p id="a_Iz6nk">These tokens are passed to the <a class="glossary" href="glossary.html#parser"><span class="glossary-link-text">parser</span></a>, which arranges them into a hier­ar­chi­cal S-expres­sion called a <a class="glossary" href="glossary.html#parse-tree"><span class="glossary-link-text">parse tree</span></a>.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_ZEJjq&quot;)"></div><p id="a_ZEJjq">You can write a parser by hand. You can also use a gram­mar-based <a class="glossary" href="glossary.html#parser"><span class="glossary-link-text">parser</span></a> gen­er­a­tor, like <a href="http://docs.racket-lang.org/brag"><span class="my-code" decode="exclude">brag</span></a>, to make a parser func­tion.</p></div></li></ul><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_cijFE&quot;)"></div><p id="a_cijFE">Together, in pseudocode:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/main.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Bze6e&quot;)"></div><div class="highlight-container" id="a_Bze6e"><div id="code_52" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(module reader br<br/>  (require module/that/provides/parse<br/>           module/that/provides/tokenize)<br/>  (provide read-syntax)<br/>  (define (read-syntax name port)<br/>    (define the-parse-tree (parse (tokenize port)))<br/>    (strip-bindings<br/>     #`(module dsl-mod-name dsl/expander<br/>         #,the-parse-tree))))</div><div class="highlight" form="false" id="a_bZVec"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">reader</span> <span class="n">br</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="docs" hyphens="none">require</a></span> <span class="n">module/that/provides/parse</span>
           <span class="n">module/that/provides/tokenize</span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span><span class="p">)</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="docs" hyphens="none">read-syntax</a></span> <span class="n">name</span> <span class="n">port</span><span class="p">)</span>
    <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="n">the-parse-tree</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/brag/index.html#(def._((lib._brag/examples/nested-word-list..rkt)._parse))" class="docs" hyphens="none">parse</a></span> <span class="p">(</span><span class="n">tokenize</span> <span class="n">port</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/br/index.html#(def._((lib._br/syntax..rkt)._strip-bindings))" class="docs" hyphens="none">strip-bindings</a></span>
     <span class="o">#`</span><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
         <span class="o">#,</span><span class="n">the-parse-tree</span><span class="p">))))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpk9" data-clipboard-target="#code_52" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;the-expander&quot;)"></div><h3 anchor="the-expander" class="subhead" id="the-expander"><a href="#the-expander">The expander</a></h3></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_nG1jg&quot;)"></div><p id="a_nG1jg">Once the reader fin­ishes, the expander starts. At the end of the reader phase, the source code has been con­verted into a mod­ule expres­sion that con­tains S-expres­sions, but has no bind­ings, e.g.—</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_U9YGIc&quot;)"></div><div class="highlight-container" id="a_U9YGIc"><div id="code_53" form="false" decode="exclude" style="font-size:0;width:0;height:0">(module dsl-mod-name dsl/expander<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_e8o68a"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpkb" data-clipboard-target="#code_53" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_McDGD&quot;)"></div><p id="a_McDGD">The expander pro­vides the ini­tial set of <a class="glossary" href="glossary.html#binding"><span class="glossary-link-text">bind­ings</span></a> for the mod­ule expres­sion returned by the reader, thereby deter­min­ing the mean­ing of the iden­ti­fiers within the S-expres­sions. This, in turn, allows the expres­sions to be eval­u­ated as Racket code.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_TQCx7&quot;)"></div><p id="a_TQCx7">Any mod­ule (that meets the other require­ments below) can be used as the expander for a lan­guage. It’s invoked by the first line of the mod­ule code returned by the reader. For instance, this mod­ule expres­sion will rely on <span class="my-code" decode="exclude">dsl/expander</span> as its expander:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_U9YGIf&quot;)"></div><div class="highlight-container" id="a_U9YGIf"><div id="code_54" form="false" decode="exclude" style="font-size:0;width:0;height:0">(module dsl-mod-name dsl/expander<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_e8o68d"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpke" data-clipboard-target="#code_54" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_516Y1&quot;)"></div><p id="a_516Y1">In essence, the expander name is like an implied <span class="my-code" decode="exclude">require</span> at the begin­ning of the mod­ule:</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_IPIg9&quot;)"></div><div class="highlight-container" id="a_IPIg9"><div id="code_55" form="false" decode="exclude" style="font-size:0;width:0;height:0">(module dsl-mod-name dsl/expander<br/>  (require dsl/expander)<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_m1FFv"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="docs" hyphens="none">require</a></span> <span class="n">dsl/expander</span><span class="p">)</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpkg" data-clipboard-target="#code_55" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_ZeKmQ&quot;)"></div><p id="a_ZeKmQ">Most Racket lan­guages have their own cus­tom expander mod­ule. But it’s not manda­tory.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_GXsUe&quot;)"></div><p id="a_GXsUe">Every expander <strong><em>must</em></strong> <span class="my-code" decode="exclude">provide</span> a <span class="my-code" decode="exclude">#%module-begin</span> macro, which will be the first thing invoked in the expander. <span class="my-code" decode="exclude">#%module-begin</span> <strong><em>must</em></strong> accept as input all the expres­sions that appear in the body of the mod­ule expres­sion that <span class="my-code" decode="exclude">read-syntax</span> makes. There­fore, it’s not a bad idea to make your <span class="my-code" decode="exclude">#%module-begin</span> <a class="glossary" href="glossary.html#variadic"><span class="glossary-link-text">vari­adic</span></a>.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_dpLVs&quot;)"></div><p id="a_dpLVs">To eval­u­ate the mod­ule expres­sion returned by the reader, Racket imports the <span class="my-code" decode="exclude">#%module-begin</span> from the expander spec­i­fied in the mod­ule expres­sion. It replaces the mod­ule expres­sion with a call to this <span class="my-code" decode="exclude">#%module-begin</span>, pass­ing it all the parsed expres­sions that are in the body of the mod­ule expres­sion. So this:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_U9YGIj&quot;)"></div><div class="highlight-container" id="a_U9YGIj"><div id="code_56" form="false" decode="exclude" style="font-size:0;width:0;height:0">(module dsl-mod-name dsl/expander<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_e8o68h"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((quote._~23~25kernel)._module))" class="docs" hyphens="none">module</a></span> <span class="n">dsl-mod-name</span> <span class="n">dsl/expander</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpki" data-clipboard-target="#code_56" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_2kdQhk&quot;)"></div><p id="a_2kdQhk">Becomes this:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">source-file.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_gAmL3&quot;)"></div><div class="highlight-container" id="a_gAmL3"><div id="code_57" form="false" decode="exclude" style="font-size:0;width:0;height:0">(#%module-begin ;; imported from `dsl/expander`<br/>  dsl-sexprs ···)</div><div class="highlight" form="false" id="a_Qhz3W"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((lib._racket/private/base..rkt)._~23~25module-begin))" class="docs" hyphens="none">#%module-begin</a></span> <span class="c1">;; imported from `dsl/expander`</span>
  <span class="n">dsl-sexprs</span> <span class="n">···</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpkl" data-clipboard-target="#code_57" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_AalwU&quot;)"></div><p id="a_AalwU">Often, the <span class="my-code" decode="exclude">#%module-begin</span> for a lan­guage will per­form some lan­guage-spe­cific pro­cess­ing on the parse tree, and call the <span class="my-code" decode="exclude">#%module-begin</span> in the imple­men­ta­tion lan­guage. To pre­vent name­space col­li­sions between the two <span class="my-code" decode="exclude">#%module-begin</span> macros, use <span class="my-code" decode="exclude">rename-out</span>. In pseudocode:</p></div><div class="filebox" anchorize="false"><div class="filename" anchorize="false" decode="exclude">dsl/expander.rkt</div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_VEyPX&quot;)"></div><div class="highlight-container" id="a_VEyPX"><div id="code_58" form="false" decode="exclude" style="font-size:0;width:0;height:0">#lang br<br/>(define #'(dsl-module-begin PARSED-EXPR ...)<br/>  #'(#%module-begin ;; from `br`<br/>     PARSED-EXPR ...)<br/>(provide (rename-out [dsl-module-begin #%module-begin]))</div><div class="highlight" form="false" id="a_aEBVu"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="source"><pre><span class="kn">#lang </span><span class="nn">br</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="docs" hyphens="none">define</a></span> <span class="o">#&#39;</span><span class="p">(</span><span class="n">dsl-module-begin</span> <span class="n">PARSED-EXPR</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="docs" hyphens="none">...</a></span><span class="p">)</span>
  <span class="o">#&#39;</span><span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((lib._racket/private/base..rkt)._~23~25module-begin))" class="docs" hyphens="none">#%module-begin</a></span> <span class="c1">;; from `br`</span>
     <span class="n">PARSED-EXPR</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="docs" hyphens="none">...</a></span><span class="p">)</span>
<span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._provide))" class="docs" hyphens="none">provide</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/require.html#(form._((lib._racket/private/base..rkt)._rename-out))" class="docs" hyphens="none">rename-out</a></span> <span class="p">[</span><span class="n">dsl-module-begin</span> <span class="nb"><a href="http://docs.racket-lang.org/reference/module.html#(form._((lib._racket/private/base..rkt)._~23~25module-begin))" class="docs" hyphens="none">#%module-begin</a></span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table></div><div class="copy-button" form="false" onClick="notify('copied to clipboard', 1000)" id="a_Vldpkm" data-clipboard-target="#code_58" data-clipboard-action="copy"><img src="../fonts/feather-v1.1/svg/download.svg" alt="copy to clipboard"/></div></div></div></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_deVxs&quot;)"></div><p id="a_deVxs">Spe­cial macros that an expander can option­ally pro­vide:</p></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_T8IDQ&quot;)"></div><p id="a_T8IDQ"><span class="my-code" decode="exclude">#%top-interaction</span> is used to acti­vate the REPL.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Uhs4U&quot;)"></div><p id="a_Uhs4U"><span class="my-code" decode="exclude">#%app</span> adds sup­port for func­tion calls.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_QZd8p&quot;)"></div><p id="a_QZd8p"><span class="my-code" decode="exclude">#%datum</span> adds sup­port for self-eval­u­at­ing val­ues (like num­bers and strings).</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_bLynV&quot;)"></div><p id="a_bLynV"><span class="my-code" decode="exclude">#%top</span> adds sup­port for miss­ing iden­ti­fiers.</p></div></li></ul></li></ul><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_0D0Bz&quot;)"></div><p id="a_0D0Bz">The <span class="my-code" decode="exclude">br/quicklang</span> dialect auto­mat­i­cally exports these macros.</p></div><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;optional-tasks&quot;)"></div><h3 anchor="optional-tasks" class="subhead" id="optional-tasks"><a href="#optional-tasks">Optional tasks</a></h3></div><ul><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_JRe73&quot;)"></div><p id="a_JRe73">Writ­ing unit tests.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_9XOyJ&quot;)"></div><p id="a_9XOyJ">Inte­grat­ing the lan­guage with DrRacket, includ­ing syn­tax col­or­ing and indent­ing.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_Uq7dc&quot;)"></div><p id="a_Uq7dc">Adding Scrib­ble doc­u­men­ta­tion.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_L50Dp&quot;)"></div><p id="a_L50Dp">Adding a <span class="my-code" decode="exclude">"info.rkt"</span> file.</p></div></li><li><div class="sidebar-container"><div class="sidebar has_form" onclick="toggle_form(&quot;a_4fWom&quot;)"></div><p id="a_4fWom">Mak­ing the lan­guage avail­able through the Racket pack­age server.</p></div></li></ul></div>
    <a class="nav-left" href="glossary.html">← prev</a>
    <a class="nav-right" href="racketcon.html">next →</a>




</body>

<script type="text/javascript">



function show_all_forms() {
 var elems = document.getElementsByClassName('has_form');
 for (var i = 0 ; i < elems.length ; i++) {
  toggle_form(elems[i].id);
 }
}

// for debugging forms only: uncomment next line
// show_all_forms();

// sets up copy-to-clipboard buttons in code boxes
var clipboard = new Clipboard('.copy-button');
clipboard.on('success', function(e) {console.log(e);});
clipboard.on('error', function(e) {console.log(e);});
</script>