<!DOCTYPE html>
<html lang="en-US" class="no-js">

<!-- Mirrored from stuartsierra.com/category/programming/page/9 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:06:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Programming &#8211; Page 9 &#8211; Digital Digressions by Stuart Sierra</title>
<link rel='dns-prefetch' href='http://s0.wp.com/'>
<link rel='dns-prefetch' href='http://secure.gravatar.com/'>
<link rel='dns-prefetch' href='http://fonts.googleapis.com/'>
<link rel='dns-prefetch' href='http://s.w.org/'>
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Feed" href="http://feeds2.feedburner.com/StuartSierra" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Comments Feed" href="../../../comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Programming Category Feed" href="http://feeds2.feedburner.com/StuartSierra" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stuartsierra.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='twentysixteen-jetpack-css'  href='../../../wp-content/plugins/jetpack/modules/theme-tools/compat/twentysixteen3a05.css?ver=4.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../../wp-content/plugins/jetpack/_inc/genericons/genericons/genericons128b.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='../../../wp-content/themes/twentysixteen/style167b.css?ver=4.6' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='jetpack_css-css'  href='../../../wp-content/plugins/jetpack/css/jetpack3a05.css?ver=4.2.2' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://stuartsierra.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'>
</head>

<body class="archive paged category category-programming category-2 paged-9 category-paged-9 hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="../../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></p>
											<p class="site-description">From programming to everything else</p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-menu-container"><ul id="menu-main-menu" class="primary-menu"><li id="menu-item-635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../../about-me.html">About Me</a></li>
<li id="menu-item-633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../../writing.html">Writing</a></li>
<li id="menu-item-634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../../presentations.html">Presentations</a></li>
<li id="menu-item-636" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../../software.html">Software</a></li>
<li id="menu-item-637" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../../contact.html">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

											<div class="header-image">
					<a href="../../../index.html" rel="home">
						<img src="../../../wp-content/uploads/2015/12/header.jpg" srcset="https://stuartsierra.com/wp-content/uploads/2015/12/header-300x70.jpg 300w, https://stuartsierra.com/wp-content/uploads/2015/12/header-768x179.jpg 768w, https://stuartsierra.com/wp-content/uploads/2015/12/header-1024x239.jpg 1024w, https://stuartsierra.com/wp-content/uploads/2015/12/header.jpg 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 81vw, (max-width: 1362px) 88vw, 1200px" width="1200" height="280" alt="Digital Digressions by Stuart Sierra">
					</a>
				</div><!-- .header-image -->
					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Category: Programming</h1>			</header><!-- .page-header -->

			
<article id="post-207" class="post-207 post type-post status-publish format-standard hentry category-programming tag-altlaw tag-hadoop">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2009/02/05/207.html" rel="bookmark">Hadoop Meetup 2/10</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Just a little self-promotion: I&#8217;ll be presenting at the <a href="http://www.meetup.com/Hadoop-NYC/">New York Hadoop User Group</a> on Tuesday, February 10 at 6:30.  I&#8217;ll talk about how I use Hadoop for <a href="http://www.altlaw.org/">AltLaw.org</a>, including citation linking, distributed indexing, and using <a href="http://www.clojure.org/">Clojure</a> with Hadoop.</p>
<p><strong>Update 2/28:</strong> My <a href="http://files.meetup.com/1228907/altlaw-hadoop-meetup-2009-02-10-public.pdf">slides from this presentation</a> are available from the <a href="http://www.meetup.com/Hadoop-NYC/files/">Meetup group files</a>.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2009/02/05/207.html" rel="bookmark"><time class="entry-date published" datetime="2009-02-05T13:30:11+00:00">February 5, 2009</time><time class="updated" datetime="2009-02-28T13:07:02+00:00">February 28, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/altlaw.html" rel="tag">AltLaw</a>, <a href="../../../tag/hadoop.html" rel="tag">Hadoop</a></span><span class="comments-link"><a href="../../../2009/02/05/207.html#comments">4 Comments<span class="screen-reader-text"> on Hadoop Meetup 2/10</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-195" class="post-195 post type-post status-publish format-standard hentry category-programming tag-clojure tag-lisp tag-rspec tag-testing">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2009/01/18/tests-are-code.html" rel="bookmark">Tests Are Code</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>It&#8217;s interesting to see the first signs of <a href="http://dablog.rubypal.com/2008/11/30/probative-programming-the-physical-unification-of-code-and-tests">rebellion against RSpec</a>. I jumped on the RSpec bandwagon when it first appeared, mostly so I wouldn&#8217;t have to write &#8220;assert_equals&#8221; all the time. But while I liked and used RSpec, I don&#8217;t think it made my tests any better. If anything, they were a little bit worse. I found myself testing things that were not really relevant to the code I was writing, asserting obvious things like &#8220;a newly-created record should be empty.&#8221;</p>
<p>When I got interested in <a href="http://clojure.org/">Clojure</a>, one of the first things I wrote was a testing library called &#8220;test-is&#8221;. I borrowed from a lot of Common Lisp testing frameworks, especially the idea of a generic assertion macro called &#8220;is&#8221;. It looks like this:</p>
<pre>(deftest test-my-function
  (is (= 7 (my-function 3 4)))
  (is (even? (my-function 10 2))))</pre>
<p>This is pretty basic, but it&#8217;s sufficient for low-level unit testing. So far, I think that&#8217;s how the library has been typically used. There have been occasional requests, however, for RSpec-style syntax. I can see how this would be useful for testing at a level higher than individual functions, but I have come to believe that the added semantics of RSpec are not really necessary.</p>
<p>Right now, the test-is library is built on the same abstractions as Clojure itself. Tests are functions, so you can apply all the same tools that already exist for handling functions. Tests can be called by name, organized into namespaces, and composed. There is almost no extra bookkeeping code that I need to write to make all of this work.</p>
<p>In contrast, if I were to adopt the RSpec style, I would have to write code to call, store, and organize tests. That&#8217;s more work for me, and ultimately restricts the flexibility of the library for people who use it. Furthermore, RSpec has its own set of semantics, above and beyond the language itself, which must be learned.</p>
<p>This is my first experience supporting a library for anyone other than myself, and I don&#8217;t want to force anyone into a particular style. A library like RSpec is a complete environment that attempts to anticipate all possible usage scenarios, so it&#8217;s grown correspondingly complicated.  I want to provide a set of small tools, that can be combined with other tools to do interesting things. </p>
<p>Of course, by making that decision I&#8217;m already dictating, to some extent, how the library can be used. But really, what I&#8217;m trying to do is set limits for myself. I will commit to providing a flexible, extensible set of functions and macros for writing tests. I am explicitly not trying to provide a complete testing framework. If someone wants to build an RSpec-style framework on top of test-is, more power to them. I will happily try to make test-is easier to integrate into that framework.</p>
<p>But there&#8217;s one other thing that struck me about that article that I linked to at the beginning &#8212; the idea of putting tests and code in the same file. I think that&#8217;s a great idea, and Clojure comes ready-made to implement it. Clojure supports the idea of &#8220;metadata&#8221; on definitions. You can attach a set of arbitrary properties to any object, without affecting the value of that object.</p>
<p>It&#8217;s easy to attach a test function as metadata on a definition in Clojure, but the syntax is a little ugly, and there is no easy way to remove the tests from production code. So I came up with in addition to my library, the &#8220;with-test&#8221; macro. It lets you wrap any definition in a set of tests. It looks like this:</p>
<pre>(with-test
 (defn add-numbers [a b]
   (+ a b))
 (is (= 7 (add-numbers 3 4)))
 (is (= -4 (add-numbers -6 2))))</pre>
<p>This is equivalent to adding metadata to the function, but the syntax is a little cleaner. I&#8217;ve also added a global variable, &#8220;*load-tests*&#8221;, which can be set to false to omit tests when loading production code.</p>
<p>I like having each function right next to its tests. It makes it easier to remember to write tests, and easier to see how the function is supposed to behave. So to the extent that test-is will promote a testing style, this is it.  But it&#8217;s a pretty radical departure from the traditional style of testing, so I&#8217;m not sure how others will react to it.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2009/01/18/tests-are-code.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-01-18T12:04:21+00:00">January 18, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/clojure.html" rel="tag">Clojure</a>, <a href="../../../tag/lisp.html" rel="tag">Lisp</a>, <a href="../../../tag/rspec.html" rel="tag">RSpec</a>, <a href="../../../tag/testing.html" rel="tag">testing</a></span><span class="comments-link"><a href="../../../2009/01/18/tests-are-code.html#comments">6 Comments<span class="screen-reader-text"> on Tests Are Code</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-192" class="post-192 post type-post status-publish format-standard hentry category-programming tag-data-structures">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2009/01/10/data-are-data.html" rel="bookmark">Data Are Data, Not Objects</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>A small post for the new year (in which I have resolved to write more).</p>
<p>The standard introduction to object-oriented programming teaches you to create a class for each type of thing you want to deal with in your program. So if you&#8217;re writing a payroll program, you would have an Employee class, a Department class, and so on. The methods of those classes are supposed to model some sort of real-world behavior. You quickly realize that real-world objects are not so easily separable, so you learn about inheritance, abstract classes, polymorphism, virtual methods, overloading, and all the other gobbledygook that is supposed to bring object-oriented programming closer to the real world, but usually just confuses programmers.</p>
<p>Like many others, I became suspicious of this technique after trying to use library classes that did not provide the methods I needed. Subclassing is supposed to provide a way to add new behavior to classes, but it is often thwarted by private variables, final methods, and the admonition that modifying the internals of a class is &#8220;breaking encapsulation.&#8221;</p>
<p>The joy I experienced when I first discovered Perl was due in large part to the realization that it provided just a few simple data structures &#8212; scaler, array, hash &#8212; that were sufficient for any sort of object I wanted to model. Moreover, every CPAN library used those same data structures, so it was easy to link them together and extend them where I needed to.  Even Perl &#8220;objects&#8221; are just data structures with some added functionality.  I was similarly delighted by Clojure&#8217;s abstract data structures &#8212; list, vector, map, set &#8212; all of which are manipulated with a few generic functions.</p>
<p>The problem with defining your own classes is that every class you define has its own, unique semantics. Someone who wants to use your class has to learn those semantics, which may not be suitable for how they want to use it. I once read (I don&#8217;t remember where) that classes are good for modeling abstract, mathematical entities like sets, but they fall apart when trying to model the real world.</p>
<p>So here&#8217;s a slightly radical notion: <em>don&#8217;t use classes to model the real world</em>. Treat data as data. Every modern programming language has at least a few built-in data structures that usually provide all the semantics you need. Even Java, the prince of &#8220;everything is a class&#8221; languages, has an excellent collections library. If your program has a list of names, you don&#8217;t need to invent a NameList object, just use a List&lt;String&gt;.  Don&#8217;t hide it behind a specialized interface. The interface is already there: it&#8217;s a List.  If somebody wants to sort the list, they already know how to do it, and you never have to write a SortedNameList class.</p>
<p>This is an important idea behind JSON (and YAML) &#8212; the semantics are deliberately limited, so you know what to expect. That&#8217;s also why JSON is popular for sharing data between programs written in different languages &#8212; the semantics are simple, so they&#8217;re easy to implement.  The point is, <em>don&#8217;t create new semantics</em> when you don&#8217;t need to &#8212; you&#8217;re only making it harder to understand, extend, and reuse your code.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2009/01/10/data-are-data.html" rel="bookmark"><time class="entry-date published" datetime="2009-01-10T18:54:40+00:00">January 10, 2009</time><time class="updated" datetime="2009-01-10T18:55:50+00:00">January 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/data-structures.html" rel="tag">data structures</a></span><span class="comments-link"><a href="../../../2009/01/10/data-are-data.html#comments">5 Comments<span class="screen-reader-text"> on Data Are Data, Not Objects</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-186" class="post-186 post type-post status-publish format-standard hentry category-programming tag-altlaw tag-hadoop tag-normalization tag-rdf">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/10/23/antidenormalizationism.html" rel="bookmark">Antidenormalizationism</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>When storing any large collection of data, one of the most critical decisions one has to make is when to normalize and when to denormalize.  Normalized data is good for flexibility &#8212; you can write queries to recombine things in any combination.  Denormalized data is more efficient when you know, in advance, what the queries will be.  There&#8217;s a maxim, &#8220;normalize until it hurts, denormalize until it works.&#8221;</p>
<p>In the past two years, I&#8217;ve become a big fan of three software paradigms:</p>
<ol>
<li>RDF and the Semantic Web</li>
<li>RESTful architectures</li>
<li>Hadoop and MapReduce</li>
</ol>
<p>The first two were made for each other &#8212; RDF is the ideal data format for the Semantic Web, and Semantic Web applications are (ideally) implemented with RESTful architectures.</p>
<p>Unfortunately, as I discovered through painful experience, RDF is an inefficient representation for large amounts of data.  It&#8217;s the ultimate in normalization &#8212; each triple represents a single fact &#8212; and in flexibility, but even simple queries become prohibitively slow when each item of interest is spread across dozens of triples.</p>
<p>At the other end of the spectrum, MapReduce programming forces you into an entirely different way of thinking.  MapReduce offers exactly one data access mechanism: read a list of records from beginning to end.  No random access, do not pass GO, do not collect $200.  That restriction is what enables Hadoop to distribute a job across many machines, and to process data at the maximum rate supported by the hard disk.  Obviously, to take full advantage of these optimizations, your MapReduce program needs to be able to process each record in isolation, without referring to any other resources.  In effect, everything has to be completely denormalized.</p>
<p>For my work on <a href="http://altlaw.org/">AltLaw</a>, I&#8217;ve tended to use fully denormalized data, because anything else is too slow.  But I <em>want</em> to be working with normalized data.  I want to have every datum &#8212; plus information about its derivation &#8212; stored in one giant RDF graph.  But I also want to be able to process this graph efficiently.  Maybe if I had a dozen machines with 64 GB of memory apiece, this wouldn&#8217;t be a problem.  But with one desktop, one server, and occasional rides on EC2, that&#8217;s not an option.</p>
<p>The ideal design, I think, would be a hybrid system which can do efficient bulk processing of RDF data.  There are some pilot projects to do this with Hadoop, and I&#8217;m interested to see how they pan out.  But until then, I&#8217;ll have to make do as best I can.</p>
<p><strong>Update:</strong> The projects I remebered were HRDF and Heart, which turn out to be the same thing: <a href="http://code.google.com/p/hrdf/">http://code.google.com/p/hrdf/</a> and <a href="http://wiki.apache.org/incubator/HeartProposal">http://wiki.apache.org/incubator/HeartProposal</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/10/23/antidenormalizationism.html" rel="bookmark"><time class="entry-date published" datetime="2008-10-23T17:24:15+00:00">October 23, 2008</time><time class="updated" datetime="2008-10-24T13:58:05+00:00">October 24, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/altlaw.html" rel="tag">AltLaw</a>, <a href="../../../tag/hadoop.html" rel="tag">Hadoop</a>, <a href="../../../tag/normalization.html" rel="tag">normalization</a>, <a href="../../../tag/rdf.html" rel="tag">RDF</a></span><span class="comments-link"><a href="../../../2008/10/23/antidenormalizationism.html#comments">3 Comments<span class="screen-reader-text"> on Antidenormalizationism</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-179" class="post-179 post type-post status-publish format-standard hentry category-programming tag-rdf">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/08/27/whither-rdf.html" rel="bookmark">Whither RDF?</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>RDF is seductive.  I can&#8217;t get away from it.  Something about the ability to represent anything and everything in one consistent model just tugs at my engineer&#8217;s heartstrings.</p>
<p>The problem with RDF, as I&#8217;ve discovered through painful experience, is that the ability to represent everything sacrifices the ability to represent anything <em>efficiently</em>.  Certainly that is partly the fault of existing toolkits, but it&#8217;s still a fault.</p>
<p>But maybe I&#8217;m simply missing the point of RDF.  Its stated <a href="http://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#section-design-goals">design goals</a> do not include &#8220;efficient storage and retrieval.&#8221;  The W3C&#8217;s RDF recommendations make no mention of performance.  Tim Berners-Lee doesn&#8217;t mention it in his Semantic Web talks, except in airy references to future <a href="http://www.w3.org/2000/Talks/1206-xml2k-tbl/slide15-0.html">general purpose RDF engines</a>.</p>
<p>RDF, it seems, is intended not as so much as a data <em>storage</em> model but as a <em>communication</em> model.  In short, it&#8217;s a protocol.  One of the goals Berners-Lee does talk about is exposing the information currently trapped inside relational databases.  So maybe I shouldn&#8217;t think about storing RDF and think instead about presenting it as a view of my own domain-specific data structures.</p>
<p>There are still some benefits to be had from storing and analyzing data in a graph-like structure.  But RDF is not necessarily the be-all and end-all of graphical models either.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/08/27/whither-rdf.html" rel="bookmark"><time class="entry-date published updated" datetime="2008-08-27T00:23:35+00:00">August 27, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/rdf.html" rel="tag">RDF</a></span><span class="comments-link"><a href="../../../2008/08/27/whither-rdf.html#comments">2 Comments<span class="screen-reader-text"> on Whither RDF?</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-177" class="post-177 post type-post status-publish format-standard hentry category-programming tag-clojure tag-lisp tag-semantic-web">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/08/08/clojure-for-the-semantic-web.html" rel="bookmark">Clojure for the Semantic Web</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I dropped in to hear Rich Hickey talk about <a href="http://clojure.org/">Clojure</a> at the <a href="http://semweb.meetup.com/25/calendar/8344273/">New York Semantic Web</a> meetup group.  Some highlights:</p>
<p>• Some programs, like compilers or theorem provers, are themselves functions.  They take input and produce output.  Purely functional languages like Haskell are good for these kinds of programs.  But other programs, like GUIs or automation systems, are not functions.  For example, a program that runs continously for months or years is not a function in the mathematical sense.  Clojure is mostly functional, but not purely functional.</p>
<p>• Most Clojure programmers go through an arc.  First they think &#8220;eww, Java&#8221; and try to hide all the Java.  Then they think &#8220;ooh, Java&#8221; and realize that Clojure is a powerful way to write Java code.  Rich frowns upon &#8220;wrapper&#8221; functions in Clojure that do nothing but wrap a Java method.  Calling the Java method directly is faster and easier to look up in JavaDoc.</p>
<p>• Rich recommended a paper, <a href="http://lambda-the-ultimate.org/node/1446">Out of the Tar Pit</a>, for a discussion of functional and relational techniques to manage state.</p>
<p>• Clojure&#8217;s data structures are <em>persistent</em>.  This isn&#8217;t persistent in the stored-in-a-database sense.  It refers to immutability.  For example, adding an element to a vector creates a new vector that shares structure with the old one.  Because all data structures are immutable, this is both safe and efficient.  Clojure&#8217;s hash maps, for example, have time complexity of log-base-32, which is so small it&#8217;s practically constant.</p>
<p>• The first thing Rich did when experimenting with the semantic web was to pull data out of the Jena API and get it into Clojure data structures.  That allows him to leverage the full power of Clojure&#8217;s data manipulation functions.  This opens up a world of possibilities that he wouldn&#8217;t have if he stuck with Jena objects.  Basically, having your data trapped inside objects is bad, because you&#8217;re limited to whatever methods those objects provide.  With generic data structures, you can re-use and compose all the functions that Clojure already provides.</p>
<p>Screencasts and code from the talk should appear soon &#8212; watch clojure.org or the Clojure Google group for an announcement.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/08/08/clojure-for-the-semantic-web.html" rel="bookmark"><time class="entry-date published updated" datetime="2008-08-08T11:08:08+00:00">August 8, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/clojure.html" rel="tag">Clojure</a>, <a href="../../../tag/lisp.html" rel="tag">Lisp</a>, <a href="../../../tag/semantic-web.html" rel="tag">semantic web</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-171" class="post-171 post type-post status-publish format-standard hentry category-programming tag-altlaw tag-hadoop tag-thrift">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/07/17/the-document-blob-model.html" rel="bookmark">The Document-Blob Model</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><strong>Update September 22, 2008:</strong> I have abandoned this model.  I&#8217;m still using Hadoop, but with a much simpler data model.  I&#8217;ll post about it at some point.</p>
<p>&#8230;</p>
<p>Gosh darn, it&#8217;s hard to get this right.  In my most recent work on <a href="http://altlaw.org/">AltLaw</a>, I&#8217;ve been building an infrastructure for doing all my back-end data processing using <a href="http://hadoop.apache.org/core/">Hadoop</a> and <a href="http://incubator.apache.org/thrift/">Thrift</a>.</p>
<p>I&#8217;ve described this before, but here&#8217;s a summary of my situation:</p>
<ol>
<li>I have a few million files, ~15 GB total.</li>
<li>Many files represent the same logical entity, sometimes in different formats or from different sources.</li>
<li>Every file needs 5-10 steps of clean-up, data extraction, and format conversion.</li>
<li>The files come from ~15 different sources, each requiring different processing.</li>
<li>I get 20-50 new files daily.</li>
</ol>
<p>I want to be able to process all this efficiently, but I also want to be able to change my mind.  I can never say, &#8220;I&#8217;ve run this process on this batch of files, so I never need to do it again.&#8221;  I might improve the code, or I might find that I need to go back to the original files to get some other kind of data.</p>
<p>Hadoop was the obvious choice for efficiency.  Thrift is a good, compact data format that&#8217;s easier to use than Hadoop&#8217;s native data structures.  The only question is, what&#8217;s the schema?  Or, more simply, what do I want to store?</p>
<p>I&#8217;ve come up with what, for want of a better term, I call the <strong>Document-Blob Model</strong>.</p>
<p>I start with a collection of Documents.  Each Document represents a single, logical entity, like a court case or a section of statute.  A Document contains an integer identifier and an array of Blobs, nothing more.</p>
<p>What is a Blob?  Good question.  It&#8217;s data, any data.  It may represent a normal file, in which case it stores the content of that file and some metadata like the MIME type.  It may also represent a data structure.  Because unused fields do not occupy any space in Thrift&#8217;s binary format, the Blob type can have fields for every structure I might want to use now or in the future.  In effect, a Blob is a polymorphic type that can become any other type.</p>
<p>So how do I know which type it is?  By where it came from.  Each Blob is tagged with the name of its &#8220;provider&#8221;.  For files downloaded in bulk, the provider is the web site or service where I got them.  For generated files, the creator is a class or script, with a version number.</p>
<p>So I have a few hundred thousand Documents, each containing several Blobs.  I represent each conversion/extraction/processing step as its own Java class.  All those classes implement the same, simple interface: take one Blob as input and return another Blob as output.</p>
<p>Helper functions allow me to say things like, &#8220;Take this Document, find the Blob that was generated by class X.  Run  class Y on that Blob, and append result to the original Document.&#8221;  In this way, I can stack multiple processing steps into a single Hadoop job, but retain the option of reusing or rearranging those steps later on.</p>
<p>Will this work?  I have no idea.  I just came up with it last week.  Today I successfully ran a 5-step job on ~700,000 documents from the <a href="http://bulk.resource.org/courts.gov/c/">public.resource.org federal case corpus</a>.  It took about an hour on a 10-node Hadoop/EC2 cluster.</p>
<p>The real test will come when I apply this model to the much messier collection of files we downloaded directly from the federal courts.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/07/17/the-document-blob-model.html" rel="bookmark"><time class="entry-date published" datetime="2008-07-17T16:43:23+00:00">July 17, 2008</time><time class="updated" datetime="2008-09-22T12:39:56+00:00">September 22, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/altlaw.html" rel="tag">AltLaw</a>, <a href="../../../tag/hadoop.html" rel="tag">Hadoop</a>, <a href="../../../tag/thrift.html" rel="tag">Thrift</a></span><span class="comments-link"><a href="../../../2008/07/17/the-document-blob-model.html#comments">3 Comments<span class="screen-reader-text"> on The Document-Blob Model</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-170" class="post-170 post type-post status-publish format-standard hentry category-programming tag-protocol-buffers tag-thrift">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/07/10/thrift-vs-protocol-buffers.html" rel="bookmark">Thrift vs. Protocol Buffers</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><!-- table#comparison { background:white; border: 1px solid black; width: 75%; } #comparison .first { background: lightblue; } #comparison .alt { background: #eee; } #comparison td, #comparison th { padding: 3px; vertical-align: top; text-align: left; } --></p>
<p>Google recently released its <a href="http://code.google.com/p/protobuf/">Protocol Buffers</a> as open source. About a year ago, Facebook released a similar product called <a href="http://developers.facebook.com/thrift/">Thrift</a>. I&#8217;ve been comparing them; here&#8217;s what I&#8217;ve found:</p>
<table id="comparison" border="0">
<tbody>
<tr class="first">
<th width="20%"></th>
<th width="40%">Thrift</th>
<th width="40%">Protocol Buffers</th>
</tr>
<tr>
<th>Backers</th>
<td>Facebook, <a href="http://wiki.apache.org/incubator/ThriftProposal">Apache (accepted for incubation)</a></td>
<td>Google</td>
</tr>
<tr class="alt">
<th>Bindings</th>
<td>C++, Java, Python, PHP, XSD, Ruby, C#, Perl, Objective C, Erlang, Smalltalk, OCaml, and Haskell</td>
<td>C++, Java, Python<br />
(Perl, Ruby, and C# under discussion)</td>
</tr>
<tr>
<th>Output Formats</th>
<td>Binary, JSON</td>
<td>Binary</td>
</tr>
<tr class="alt">
<th>Primitive Types</th>
<td>bool<br />
byte<br />
16/32/64-bit integers</p>
<p>double<br />
string<br />
byte sequence<br />
map&lt;t1,t2&gt;<br />
list&lt;t&gt;<br />
set&lt;t&gt;</td>
<td>bool</p>
<p>32/64-bit integers<br />
float<br />
double<br />
string<br />
byte sequence</p>
<p>&#8220;repeated&#8221; properties act like lists</td>
</tr>
<tr>
<th>Enumerations</th>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="alt">
<th>Constants</th>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<th>Composite Type</th>
<td>struct</td>
<td>message</td>
</tr>
<tr class="alt">
<th>Exception Type</th>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<th>Documentation</th>
<td>So-so</td>
<td>Good</td>
</tr>
<tr class="alt">
<th>License</th>
<td>Apache</td>
<td>BSD-style</td>
</tr>
<tr>
<th>Compiler Language</th>
<td>C++</td>
<td>C++</td>
</tr>
<tr class="alt">
<th>RPC Interfaces</th>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<th>RPC Implementation</th>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="alt">
<th>Composite Type Extensions</th>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Overall, I think Thrift wins on features and Protocol Buffers win on<br />
documentation.  Implementation-wise, they&#8217;re quite similar.  Both use<br />
integer tags to identify fields, so you can add and remove fields<br />
without breaking existing code.  Protocol Buffers support<br />
variable-width encoding of integers, which saves a few bytes.  (Thrift<br />
has an experimental output format with variable-width ints.)</p>
<p>The major difference is that Thrift provides a full client/server RPC<br />
implementation, whereas Protocol Buffers only generate stubs to use in<br />
your own RPC system.</p>
<p><strong>Update July 12, 2008:</strong> I haven&#8217;t tested for speed, but from a cursory examination it seems that, at the binary level, Thrift and Protocol Buffers are very similar.  I think Thrift will develop a more coherent community now that it&#8217;s under Apache incubation.  It just moved to a new <a href="http://incubator.apache.org/thrift/">web site</a> and <a href="http://incubator.apache.org/thrift/mailing_lists.html">mailing list</a>, and the <a href="http://issues.apache.org/jira/browse/THRIFT">issue tracker</a> is active.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/07/10/thrift-vs-protocol-buffers.html" rel="bookmark"><time class="entry-date published" datetime="2008-07-10T13:05:40+00:00">July 10, 2008</time><time class="updated" datetime="2009-04-06T16:29:33+00:00">April 6, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/protocol-buffers.html" rel="tag">Protocol Buffers</a>, <a href="../../../tag/thrift.html" rel="tag">Thrift</a></span><span class="comments-link"><a href="../../../2008/07/10/thrift-vs-protocol-buffers.html#comments">31 Comments<span class="screen-reader-text"> on Thrift vs. Protocol Buffers</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-167" class="post-167 post type-post status-publish format-standard hentry category-programming tag-rest tag-world-wide-web">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/07/07/moving-the-c-in-mvc.html" rel="bookmark">Moving the &#8216;C&#8217; in MVC</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I&#8217;m sure I&#8217;m not the first to suggest this, but here goes.</p>
<p>Ever since somebody first thought of applying the Model-View-Controller paradigm to the web, we&#8217;ve had this:</p>
<p><a href="../../../wp-content/uploads/2008/07/mvc_on_server.png"><img class="aligncenter size-full wp-image-168" title="mvc_on_server" src="../../../wp-content/uploads/2008/07/mvc_on_server.png" alt="MVC With Controller on the Server" width="325" height="236" srcset="https://stuartsierra.com/wp-content/uploads/2008/07/mvc_on_server.png 325w, https://stuartsierra.com/wp-content/uploads/2008/07/mvc_on_server-300x217.png 300w" sizes="(max-width: 325px) 85vw, 325px" /></a></p>
<p>The View is a conflation of HTML and JavaScript.  JavaScript is an afterthought, a gimmick  to make pages &#8220;dynamic.&#8221;  All the real action is in the Controller, which talks to the database, processes the internal application logic, and renders templates before sending complete pages back to the client.</p>
<p>But what if we implement the Controller entirely in JavaScript?</p>
<p><a href="../../../wp-content/uploads/2008/07/mvc_on_client.png"><img class="aligncenter size-full wp-image-169" title="mvc_on_client" src="../../../wp-content/uploads/2008/07/mvc_on_client.png" alt="MVC With Controller on the Client" width="325" height="237" srcset="https://stuartsierra.com/wp-content/uploads/2008/07/mvc_on_client.png 325w, https://stuartsierra.com/wp-content/uploads/2008/07/mvc_on_client-300x218.png 300w" sizes="(max-width: 325px) 85vw, 325px" /></a><br />
Now we can put the Controller on the client, and build a RESTful HTTP interface to communicate with the database.</p>
<p>Obviously there are many issues to consider.  First and foremost is making sure that rogue clients cannot do anything to the database they&#8217;re not supposed to.  But that&#8217;s a manageable problem &#8212; <a href="http://aws.amazon.com/s3">Amazon S3</a> is a good example.  Apps that run entirely in the client can even be made <em>more</em> secure than their server-based counterparts, because encryption can be implemented entirely in the client, so that the server never sees the unencrypted data.  (Clipperz, an password-storage service, calls this a <a href="http://www.clipperz.com/users/marco/blog/2007/08/24/anatomy_zero_knowledge_web_application">zero-knowledge web app</a>.)</p>
<p>There are some interesting possibilities.  For example, the entire application, including the current state of the model, can be downloaded as a single web page for off-line use.  (Clipperz supports this.)  Also, the same application could connect to multiple data sources.  And as with any RESTful architecture, back-end scaling is relatively easy.</p>
<p><strong>Update July 10, 2008:</strong> I&#8217;m always amazed when one of my posts show up on Reddit.  Maybe it was the diagrams.  In any case, thanks to everyone who sent in comments.  A couple responses:</p>
<ol>
<li>Yes, in a sense I&#8217;ve described Ajax.  But most Ajax-related code around the web these days is still in the &#8220;dynamic view&#8221; mode rather than the &#8220;client-side controller&#8221; mode.</li>
<li>I like <a href="http://java.sun.com/blueprints/guidelines/designing_enterprise_applications_2e/images/app-archa2.gif">Sun&#8217;s MVC diagram</a> in which the View takes an active role in rendering the model rather than being just a template.  It&#8217;s actually quite similar to what I&#8217;m suggesting here.</li>
<li>Some MVC frameworks, such as Ruby on Rails, insist that logic in the View is bad, but then they include all these Ajax view helpers, so it&#8217;s a bit of a mixed message.</li>
<li>I&#8217;m not insisting that all business logic be implemented client-side.  Rather, I&#8217;m assuming some kind of &#8220;smart&#8221; database, with a RESTful front-end, that&#8217;s capable of containing business logic.  Back in the day, these were SQL stored procedures.  Now it&#8217;s probably something like CouchDB.</li>
<li>Yes, this design is bad for search engines, bookmarks, and deep linking.  But there are plenty of cases where those don&#8217;t matter.  Look at Google Mail, for example.  It basically follows the design I&#8217;ve laid out here: the entire app is one HTML page (or a very few pages) with behavior implemented in client-side JavaScript.</li>
</ol>
<p><strong>Update August 7, 2008:</strong> This is an example of the code-on-demand style described in Roy Fielding&#8217;s REST thesis.  <a href="http://bitworking.org/news/355/code-on-demand-rest-and-cloud-computing">Link from Joe Gregorio.</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/07/07/moving-the-c-in-mvc.html" rel="bookmark"><time class="entry-date published" datetime="2008-07-07T12:04:49+00:00">July 7, 2008</time><time class="updated" datetime="2008-08-07T15:09:48+00:00">August 7, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/rest.html" rel="tag">REST</a>, <a href="../../../tag/world-wide-web.html" rel="tag">World Wide Web</a></span><span class="comments-link"><a href="../../../2008/07/07/moving-the-c-in-mvc.html#comments">15 Comments<span class="screen-reader-text"> on Moving the &#8216;C&#8217; in MVC</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-164" class="post-164 post type-post status-publish format-standard hentry category-programming tag-ai tag-natural-language">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../../2008/06/25/ai-lives.html" rel="bookmark">AI Lives!</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Just when you thought the A.I. Winter would last forever, up pops <a href="http://www.brainhat.com/">Brainhat</a> with an open-source inference engine that uses natural language as its primary interface.  Cool!</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../../../2008/06/25/ai-lives.html" rel="bookmark"><time class="entry-date published updated" datetime="2008-06-25T09:33:14+00:00">June 25, 2008</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/ai.html" rel="tag">AI</a>, <a href="../../../tag/natural-language.html" rel="tag">Natural Language</a></span><span class="comments-link"><a href="../../../2008/06/25/ai-lives.html#comments">1 Comment<span class="screen-reader-text"> on AI Lives!</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><a class="prev page-numbers" href="8.html">Previous page</a>
<a class='page-numbers' href='../index.html'><span class="meta-nav screen-reader-text">Page </span>1</a>
<span class="page-numbers dots">&hellip;</span>
<a class='page-numbers' href='8.html'><span class="meta-nav screen-reader-text">Page </span>8</a>
<span class='page-numbers current'><span class="meta-nav screen-reader-text">Page </span>9</span>
<a class='page-numbers' href='10.html'><span class="meta-nav screen-reader-text">Page </span>10</a>
<span class="page-numbers dots">&hellip;</span>
<a class='page-numbers' href='19.html'><span class="meta-nav screen-reader-text">Page </span>19</a>
<a class="next page-numbers" href="10.html">Next page</a></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://stuartsierra.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section><section id="text-4" class="widget widget_text">			<div class="textwidget"><ul>
<li><a href="http://feeds2.feedburner.com/StuartSierra" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="../../../comments/feed" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
</ul>
<ul>
<li><a href="https://twitter.com/stuartsierra">Twitter</a></li>
<li><a href="https://github.com/stuartsierra">GitHub</a></li>
</ul></div>
		</section><section id="tag-widget-2" class="widget TagWidget"><h2 class="widget-title">Clojure Do’s and Don’ts</h2><ul class = "posts-by-tag-list"><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-883"><a class = "posts-by-tag-item-title" href="../../../2015/08/25/clojure-donts-lazy-effects.html">Clojure Don’ts: Lazy Effects</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-877"><a class = "posts-by-tag-item-title" href="../../../2015/08/10/clojure-donts-redundant-map.html">Clojure Don’ts: Redundant map</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-870"><a class = "posts-by-tag-item-title" href="../../../2015/06/16/clojure-donts-single-branch-if.html">Clojure Don’ts: Single-branch if</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-854"><a class = "posts-by-tag-item-title" href="../../../2015/06/10/clojure-donts-heisenparameter.html">Clojure Don’ts: The Heisenparameter</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-849"><a class = "posts-by-tag-item-title" href="../../../2015/06/01/clojure-donts-optional-arguments-with-varargs.html">Clojure Don’ts: Optional Arguments with Varargs</a></li><li class="posts-by-tag-item Clojure do's and don'ts errors" id="posts-by-tag-item-836"><a class = "posts-by-tag-item-title" href="../../../2015/05/27/clojure-uncaught-exceptions.html">Clojure Do’s: Uncaught Exceptions</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-831"><a class = "posts-by-tag-item-title" href="../../../2015/05/17/clojure-record-constructors.html">Record Constructors</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-826"><a class = "posts-by-tag-item-title" href="../../../2015/05/10/clojure-namespace-aliases.html">Clojure Do’s: Namespace Aliases</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-820"><a class = "posts-by-tag-item-title" href="../../../2015/05/02/clojure-donts-isa.html">Clojure Don’ts: isa?</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-812"><a class = "posts-by-tag-item-title" href="../../../2015/04/26/clojure-donts-concat.html">Clojure Don’ts: Concat</a></li></ul></section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../../about-me.html">About Me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../../writing.html">Writing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../../presentations.html">Presentations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../../software.html">Software</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../../contact.html">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="../../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></span>
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

	<div style="display:none">
	<div class="grofile-hash-map-55878d0196b91803f9cb2c372b0551d3">
	</div>
	</div>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201635'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2016Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/jetpack/modules/wpgroho167b.js?ver=4.6'></script>
<script type='text/javascript' src='../../../wp-content/themes/twentysixteen/js/skip-link-focus-fix8de4.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/twentysixteen/js/functions8de4.js?ver=20160816'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min167b.js?ver=4.6'></script>
<script type='text/javascript' src='https://stats.wp.com/e-201635.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.2.2',blog:'2702563',post:'0',tz:'-4',srv:'stuartsierra.com'} ]);
	_stq.push([ 'clickTrackerInit', '2702563', '0' ]);
</script>
</body>

<!-- Mirrored from stuartsierra.com/category/programming/page/9 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:06:41 GMT -->
</html>

<!-- Dynamic page generated in 0.394 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-09-02 13:06:36 -->

<!-- Compression = gzip -->