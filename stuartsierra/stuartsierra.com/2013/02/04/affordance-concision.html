<!DOCTYPE html>
<html lang="en-US" class="no-js">

<!-- Mirrored from stuartsierra.com/2013/02/04/affordance-concision by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:02:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Affordance and Concision &#8211; Digital Digressions by Stuart Sierra</title>
<link rel='dns-prefetch' href='http://s0.wp.com/'>
<link rel='dns-prefetch' href='http://secure.gravatar.com/'>
<link rel='dns-prefetch' href='http://fonts.googleapis.com/'>
<link rel='dns-prefetch' href='http://s.w.org/'>
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Feed" href="http://feeds2.feedburner.com/StuartSierra" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Comments Feed" href="../../../comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Affordance and Concision Comments Feed" href="affordance-concision/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stuartsierra.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='twentysixteen-jetpack-css'  href='../../../wp-content/plugins/jetpack/modules/theme-tools/compat/twentysixteen3a05.css?ver=4.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../../wp-content/plugins/jetpack/_inc/genericons/genericons/genericons128b.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='../../../wp-content/themes/twentysixteen/style167b.css?ver=4.6' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='jetpack_css-css'  href='../../../wp-content/plugins/jetpack/css/jetpack3a05.css?ver=4.2.2' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://stuartsierra.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='A Brief Rant About Versioning' href='../../01/28/brief-rant-about-versioning.html' />
<link rel='next' title='On the Perils of Dynamic Scope' href='../../03/29/perils-of-dynamic-scope.html' />
<meta name="generator" content="WordPress 4.6" />
<link rel="canonical" href="affordance-concision.html" />
<link rel='shortlink' href='https://wp.me/pbl3J-bb' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed824b.json?url=https%3A%2F%2Fstuartsierra.com%2F2013%2F02%2F04%2Faffordance-concision" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embed820f?url=https%3A%2F%2Fstuartsierra.com%2F2013%2F02%2F04%2Faffordance-concision&amp;format=xml" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'>

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Affordance and Concision" />
<meta property="og:url" content="https://stuartsierra.com/2013/02/04/affordance-concision" />
<meta property="og:description" content="Quick, Clojure programmers, what does the following expression do? (get x k) If you answered, It looks up the key k in an associative data structure x and returns its associated value, you&#8217;re…" />
<meta property="article:published_time" content="2013-02-04T13:28:52+00:00" />
<meta property="article:modified_time" content="2013-02-05T01:45:12+00:00" />
<meta property="og:site_name" content="Digital Digressions by Stuart Sierra" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:card" content="summary" />
</head>

<body class="single single-post postid-693 single-format-standard">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="../../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></p>
											<p class="site-description">From programming to everything else</p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-menu-container"><ul id="menu-main-menu" class="primary-menu"><li id="menu-item-635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../../about-me.html">About Me</a></li>
<li id="menu-item-633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../../writing.html">Writing</a></li>
<li id="menu-item-634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../../presentations.html">Presentations</a></li>
<li id="menu-item-636" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../../software.html">Software</a></li>
<li id="menu-item-637" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../../contact.html">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

											<div class="header-image">
					<a href="../../../index.html" rel="home">
						<img src="../../../wp-content/uploads/2015/12/header.jpg" srcset="https://stuartsierra.com/wp-content/uploads/2015/12/header-300x70.jpg 300w, https://stuartsierra.com/wp-content/uploads/2015/12/header-768x179.jpg 768w, https://stuartsierra.com/wp-content/uploads/2015/12/header-1024x239.jpg 1024w, https://stuartsierra.com/wp-content/uploads/2015/12/header.jpg 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 81vw, (max-width: 1362px) 88vw, 1200px" width="1200" height="280" alt="Digital Digressions by Stuart Sierra">
					</a>
				</div><!-- .header-image -->
					</header><!-- .site-header -->

		<div id="content" class="site-content">

<div id="primary" class="content-area">
	<main id="main" class="site-main" role="main">
		
<article id="post-693" class="post-693 post type-post status-publish format-standard hentry category-programming tag-clojure">
	<header class="entry-header">
		<h1 class="entry-title">Affordance and Concision</h1>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Quick, Clojure programmers, what does the following expression do?
</p>
<pre class="src src-clojure">(<span class="org-builtin">get</span> x k)
</pre>
<p>
If you answered, <i>It looks up the key <code>k</code> in an associative data structure <code>x</code> and returns its associated value</i>, you&#8217;re right, but only partially.
</p>
<p>
What if <code>x</code> is not an associative data structure? In every released version of Clojure up to and including 1.5.0, <code>get</code> will return <code>nil</code> in that case.
</p>
<p>
Is that a bug or a feature? It can certainly lead to some hard-to-find bugs, such as this one which I&#8217;ve often found in my own code:
</p>
<pre class="src src-clojure">(<span class="org-keyword">def</span> <span class="org-function-name">person</span> (<span class="org-builtin">ref</span> {<span class="org-constant">:name</span> <span class="org-string">"Stuart"</span> <span class="org-constant">:job</span> <span class="org-string">"Programmer"</span>}))

(<span class="org-builtin">get</span> person <span class="org-constant">:name</span>)
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; nil</span>
</pre>
<p>
Spot the bug? <code>person</code> is not a map but rather a Ref whose state is a map. I should have written <code>(get @person :name)</code>. One character between triumph and defeat! To make matters worse, that <code>nil</code> might not show up until it triggers a NullPointerException several pages of code later.
</p>
<p>
It turns out that several core functions in Clojure behave this way: if called on an object which does not implement the correct interface, they return <code>nil</code> rather than throwing an exception.
</p>
<p>
The <code>contains?</code> function is a more bothersome example. Not only is the name difficult to remember &mdash; it&#8217;s an associative function that checks for keys, not a linear search of values like <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#contains(java.lang.Object)">java.util.Collection#contains</a> &mdash; but it also returns <code>nil</code> on functions which do not implement <a href="https://github.com/clojure/clojure/blob/clojure-1.4.0/src/jvm/clojure/lang/Associative.java">clojure.lang.Associative</a>. Or at least it did up through Clojure 1.4.0. I submitted a <a href="https://github.com/clojure/clojure/commit/3acb6ee7ec5c295ae14de861d03a5efd115a5968">patch</a> (<a href="http://dev.clojure.org/jira/browse/CLJ-932">CLJ-932</a>), included in Clojure 1.5.0, which changed <code>contains?</code> to throw an exception instead.<a class="footref" name="fnr.1" href="#fn.1">[1]</a>
</p>
<p>
I submitted a similar patch (<a href="http://dev.clojure.org/jira/browse/CLJ-1107">CLJ-1107</a>) to do the same thing for <code>get</code>, but not in time for consideration in the 1.5.0 release.
</p>
<p>
A few weeks later, I was writing some code that looked like this:
</p>
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">my-type</span> [x]
  (<span class="org-keyword">or</span> (<span class="org-builtin">get</span> x <span class="org-constant">:my-namespace/type</span>)
      (<span class="org-builtin">get</span> (<span class="org-builtin">meta</span> x) <span class="org-constant">:my-namespace/type</span>)
      (<span class="org-builtin">get</span> x <span class="org-constant">:type</span>)
      (clojure.core/<span class="org-builtin">type</span> x)))
</pre>
<p>
I wanted a flexible definition of &#8220;type&#8221; which worked on maps or records with different possible keys, falling back on the <code>clojure.core/type</code> function, which looks for a <code>:type</code> key in metadata before falling back to <code>clojure.core/class</code>.
</p>
<p>
Before the patch to <code>get</code> in CLJ-1107, this code works perfectly well. After the patch, it won&#8217;t. I would have to write this instead:
</p>
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">my-type</span> [x]
  (<span class="org-keyword">or</span> (<span class="org-keyword">when</span> (<span class="org-builtin">associative?</span> x)
        (<span class="org-builtin">get</span> x <span class="org-constant">:my-namespace/type</span>))
      (<span class="org-builtin">get</span> (<span class="org-builtin">meta</span> x) <span class="org-constant">:my-namespace/type</span>)
      (<span class="org-keyword">when</span> (<span class="org-builtin">associative?</span> x)
        (<span class="org-builtin">get</span> x <span class="org-constant">:type</span>))
      (clojure.core/<span class="org-builtin">type</span> x)))
</pre>
<p>
But wait! The <code>meta</code> function also returns <code>nil</code> for objects which do not support metadata. Maybe that should be &#8220;fixed&#8221; too. Then I would have to write this:
</p>
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">my-type</span> [x]
  (<span class="org-keyword">or</span> (<span class="org-keyword">when</span> (<span class="org-builtin">associative?</span> x)
        (<span class="org-builtin">get</span> x <span class="org-constant">:my-namespace/type</span>))
      (<span class="org-keyword">when</span> (<span class="org-builtin">instance?</span> x <span class="org-preprocessor">clojure.lang.IMeta</span>)
        (<span class="org-builtin">get</span> (<span class="org-builtin">meta</span> x) <span class="org-constant">:my-namespace/type</span>))
      (<span class="org-keyword">when</span> (<span class="org-builtin">associative?</span> x)
        (<span class="org-builtin">get</span> x <span class="org-constant">:type</span>))
      (clojure.core/<span class="org-builtin">type</span> x)))
</pre>
<p>
And so on.
</p>
<p>
Every language decision means trade-offs. Clojure accepts <code>nil</code> as a logical false value in boolean contexts, like Common Lisp (and also many scripting languages). This &#8220;nil punning&#8221; enables a concise style in which <code>nil</code> stands in for an empty collection or missing data.<a class="footref" name="fnr.2" href="#fn.2">[2]</a> For example, Clojure 1.5.0 introduces two new macros <a href="https://github.com/clojure/clojure/blob/clojure-1.5.0-RC4/src/clj/clojure/core.clj#L6785-L6805"><code>some-&gt;</code> and <code>some-&gt;&gt;</code></a>, which keep evaluating expressions until one of them returns <code>nil</code>.
</p>
<p>
Is Clojure&#8217;s <code>get</code> wrong? It depends on what you think <code>get</code> should mean. If you&#8217;re a fan of more strictly-typed functional languages you might think <code>get</code> should be defined to return an instance of the <code>Maybe</code> monad:
</p>
<pre class="example">
;; made-up syntax:
get [Associative⟨K,V⟩, K] → Maybe⟨V⟩
</pre>
<p>
You can implement the <a href="http://onclojure.com/2009/03/05/a-monad-tutorial-for-clojure-programmers-part-1/">Maybe monad in Clojure</a>, but there&#8217;s less motivation to do so without the support of a static type checker. You could also argue that, since Clojure is dynamically-typed, <code>get</code> can have a more general type:
</p>
<pre class="example">
;; made-up syntax:
get [Any, Any] → Any | nil
</pre>
<p>
This latter definition is effectively the type of <code>get</code> in Clojure right now.
</p>
<p>
Which form is better is a matter of taste. What I do know is that the current behavior of <code>get</code> doesn&#8217;t give much <i>affordance</i> to a Clojure programmer, even an experienced one.<a class="footref" name="fnr.3" href="#fn.3">[3]</a>
</p>
<p>
Again, tradeoffs. Clojure&#8217;s definition of <code>get</code> is flexible but can lead to subtle bugs. The stricter version would be safer but less flexible.
</p>
<p>
An even stricter version of <code>get</code> would throw an exception if the key is not present instead of returning <code>nil</code>. Sometimes that&#8217;s what you want. The <a href="https://github.com/Datomic/simulant">Simulant testing framework</a> defines a utility function <a href="https://github.com/Datomic/simulant/blob/4d4580460a6aea917b74a923060c99dae906b3fc/src/simulant/util.clj#L23-L30"><code>getx</code></a> that does just that.
</p>
<p>
Over the past five years, Rich Hickey has gradually led Clojure in the direction of &#8220;fast but correct by default.&#8221; This is particularly evident in the <a href="http://dev.clojure.org/display/doc/Documentation+for+1.3+Numerics">numeric primitives since release 1.3.0</a>, which throw an exception on overflow (correct) but do not automatically promote from fixed- to arbitrary-precision types (slow).
</p>
<p>
I believe the change to <code>get</code> in CLJ-1107 will ultimately be more help than hindrance. But it might also be useful to have a function which retains the &#8220;more dynamic&#8221; behavior. We might call it <code>get'</code> in the manner of the auto-promoting arithmetic functions such as <code>+'</code>. Or perhaps, with some cleverness, we could define a higher order function that transforms <i>any</i> function into a function that returns <code>nil</code> when called on a type it does not support. This would be similar in spirit to <a href="http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/fnil"><code>fnil</code></a> but harder to define.<a class="footref" name="fnr.4" href="#fn.4">[4]</a>
</p>
<p><strong>Update #1:</strong> changed <code>(instance? x clojure.lang.Associative)</code> to <code>(associative? x)</code>, suggested by Luke VanderHart.</p>
<p><strong>Update #2:</strong> Some readers have pointed out that I could make <code>my-type</code>  polymorphic, thereby avoiding the conditional checks. But that would be even longer and, in my opinion, more complicated than the conditional version. The <code>get</code> function is already polymorphic, a fact which I exploited in the original definition of <code>my-type</code>. It&#8217;s a contrived example anyway, not a cogent design.</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">
<p class="footnote"><a class="footnum" name="fn.1" href="#fnr.1">[1]</a> We can&#8217;t do anything about the name of <code>contains?</code> without breaking a lot more code. This change, at least, is unlikely to break any code that wasn&#8217;t already broken.
</p>
<p class="footnote"><a class="footnum" name="fn.2" href="#fnr.2">[2]</a> There&#8217;s a <a href="http://www.apl.jhu.edu/~hall/lisp/Scheme-Ballad.text">cute poem about nil-punning</a> in Common Lisp versus Scheme or T.
</p>
<p class="footnote"><a class="footnum" name="fn.3" href="#fnr.3">[3]</a> I am slightly abusing the <a href="http://en.wikipedia.org/wiki/Affordance">definition of affordance</a> here, but I think it works to convey what I mean: the implementation of <code>get</code> in the Clojure runtime does not help me to write my code correctly.
</p>
<p class="footnote"><a class="footnum" name="fn.4" href="#fnr.4">[4]</a> I don&#8217;t actually know how to do it without catching <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html">IllegalArgumentException</a>, which would be bad for performance and potentially too broad. Left as an exercise for the reader!
</p>
</div>
</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="affordance-concision.html" rel="bookmark"><time class="entry-date published" datetime="2013-02-04T08:28:52+00:00">February 4, 2013</time><time class="updated" datetime="2013-02-04T20:45:12+00:00">February 4, 2013</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../../tag/clojure.html" rel="tag">Clojure</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<div id="comments" class="comments-area">

			<h2 class="comments-title">
			3 thoughts on &ldquo;Affordance and Concision&rdquo;		</h2>

		
		<ol class="comment-list">
					<li id="comment-44972" class="comment even thread-even depth-1">
			<article id="div-comment-44972" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/fc02b8435ebeb2196d1396ef98656ab3?s=42&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/fc02b8435ebeb2196d1396ef98656ab3?s=84&amp;d=blank&amp;r=g 2x' class='avatar avatar-42 photo' height='42' width='42' />						<b class="fn"><a href='http://www.thinkrelevance.com/' rel='external nofollow' class='url'>Michael Nygard</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="affordance-concision.html#comment-44972">
							<time datetime="2013-02-04T09:57:58+00:00">
								February 4, 2013 at 9:57 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>This mirrors the debate about power vs. protection in programming languages. Chuck Moore has described Forth as amplifying the power of individual programmers, power to do good as well as harm. He and his collaborators think of Forth as a way to move the mass of programmers toward the ends of the bell curve. In contrast, protective languages&#8211;such as Java and Ada&#8211;tend to diminish the harm done by the worst, but also diminish the productivity of the best. Thus they move programmers toward the middle of the curve. </p>
<p>I think we are seeing a decade-long shift away from protective languages. (Michael Feathers has called it the &#8220;End of the Era of Paternalistic Languages.&#8221; I&#8217;m enjoying it.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-44974" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-44974" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/afe8dee86e7c664a293377e6aa199eae?s=42&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/afe8dee86e7c664a293377e6aa199eae?s=84&amp;d=blank&amp;r=g 2x' class='avatar avatar-42 photo' height='42' width='42' />						<b class="fn"><a href='http://www.mikera.net/' rel='external nofollow' class='url'>Mike</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="affordance-concision.html#comment-44974">
							<time datetime="2013-02-04T11:02:43+00:00">
								February 4, 2013 at 11:02 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Good article Stuart, and a very important point.</p>
<p>I think the changes like CLJ-932 are in the right direction: silent failure is *much* worse than throwing exceptions and forcing people to write a couple of extra manual checks. Silent failure can lead to some very nasty bugs.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-44977" class="comment even thread-even depth-1">
			<article id="div-comment-44977" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/22788ec68b2aee512f8f4c5d8ae819ae?s=42&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/22788ec68b2aee512f8f4c5d8ae819ae?s=84&amp;d=blank&amp;r=g 2x' class='avatar avatar-42 photo' height='42' width='42' />						<b class="fn"><a href='http://technomancy.us/' rel='external nofollow' class='url'>Phil</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="affordance-concision.html#comment-44977">
							<time datetime="2013-02-04T17:46:13+00:00">
								February 4, 2013 at 5:46 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>&gt; We can’t do anything about the name of contains? without breaking a lot more code.</p>
<p>Of course we can; rename it to <code>contains-key?</code> and introduce an alias for backwards-compatibility. At some point you have all calls to <code>contains?</code> emit a warning, and then at a major version bump you remove it. Easy.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
			<p class="no-comments">Comments are closed.</p>
	
	
</div><!-- .comments-area -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../../01/28/brief-rant-about-versioning.html" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">A Brief Rant About Versioning</span></a></div><div class="nav-next"><a href="../../03/29/perils-of-dynamic-scope.html" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">On the Perils of Dynamic Scope</span></a></div></div>
	</nav>
	</main><!-- .site-main -->

	
</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://stuartsierra.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section><section id="text-4" class="widget widget_text">			<div class="textwidget"><ul>
<li><a href="http://feeds2.feedburner.com/StuartSierra" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="../../../comments/feed" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
</ul>
<ul>
<li><a href="https://twitter.com/stuartsierra">Twitter</a></li>
<li><a href="https://github.com/stuartsierra">GitHub</a></li>
</ul></div>
		</section><section id="tag-widget-2" class="widget TagWidget"><h2 class="widget-title">Clojure Do’s and Don’ts</h2><ul class = "posts-by-tag-list"><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-883"><a class = "posts-by-tag-item-title" href="../../../2015/08/25/clojure-donts-lazy-effects.html">Clojure Don’ts: Lazy Effects</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-877"><a class = "posts-by-tag-item-title" href="../../../2015/08/10/clojure-donts-redundant-map.html">Clojure Don’ts: Redundant map</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-870"><a class = "posts-by-tag-item-title" href="../../../2015/06/16/clojure-donts-single-branch-if.html">Clojure Don’ts: Single-branch if</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-854"><a class = "posts-by-tag-item-title" href="../../../2015/06/10/clojure-donts-heisenparameter.html">Clojure Don’ts: The Heisenparameter</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-849"><a class = "posts-by-tag-item-title" href="../../../2015/06/01/clojure-donts-optional-arguments-with-varargs.html">Clojure Don’ts: Optional Arguments with Varargs</a></li><li class="posts-by-tag-item Clojure do's and don'ts errors" id="posts-by-tag-item-836"><a class = "posts-by-tag-item-title" href="../../../2015/05/27/clojure-uncaught-exceptions.html">Clojure Do’s: Uncaught Exceptions</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-831"><a class = "posts-by-tag-item-title" href="../../../2015/05/17/clojure-record-constructors.html">Record Constructors</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-826"><a class = "posts-by-tag-item-title" href="../../../2015/05/10/clojure-namespace-aliases.html">Clojure Do’s: Namespace Aliases</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-820"><a class = "posts-by-tag-item-title" href="../../../2015/05/02/clojure-donts-isa.html">Clojure Don’ts: isa?</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-812"><a class = "posts-by-tag-item-title" href="../../../2015/04/26/clojure-donts-concat.html">Clojure Don’ts: Concat</a></li></ul></section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../../about-me.html">About Me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../../writing.html">Writing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../../presentations.html">Presentations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../../software.html">Software</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../../contact.html">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="../../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></span>
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

	<div style="display:none">
	<div class="grofile-hash-map-55878d0196b91803f9cb2c372b0551d3">
	</div>
	<div class="grofile-hash-map-fc02b8435ebeb2196d1396ef98656ab3">
	</div>
	<div class="grofile-hash-map-afe8dee86e7c664a293377e6aa199eae">
	</div>
	<div class="grofile-hash-map-22788ec68b2aee512f8f4c5d8ae819ae">
	</div>
	</div>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201635'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2016Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/jetpack/modules/wpgroho167b.js?ver=4.6'></script>
<script type='text/javascript' src='../../../wp-content/themes/twentysixteen/js/skip-link-focus-fix8de4.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/themes/twentysixteen/js/functions8de4.js?ver=20160816'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min167b.js?ver=4.6'></script>
<script type='text/javascript' src='https://stats.wp.com/e-201635.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.2.2',blog:'2702563',post:'693',tz:'-4',srv:'stuartsierra.com'} ]);
	_stq.push([ 'clickTrackerInit', '2702563', '693' ]);
</script>
</body>

<!-- Mirrored from stuartsierra.com/2013/02/04/affordance-concision by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:02:28 GMT -->
</html>

<!-- Dynamic page generated in 0.389 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-09-02 12:59:34 -->

<!-- Compression = gzip -->