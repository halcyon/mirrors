<!DOCTYPE html>
<html lang="en-US" class="no-js">

<!-- Mirrored from stuartsierra.com/2009/page/3 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:02:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>2009 &#8211; Page 3 &#8211; Digital Digressions by Stuart Sierra</title>
<link rel='dns-prefetch' href='http://s0.wp.com/'>
<link rel='dns-prefetch' href='http://secure.gravatar.com/'>
<link rel='dns-prefetch' href='http://fonts.googleapis.com/'>
<link rel='dns-prefetch' href='http://s.w.org/'>
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Feed" href="http://feeds2.feedburner.com/StuartSierra" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Comments Feed" href="../../comments/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stuartsierra.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='twentysixteen-jetpack-css'  href='../../wp-content/plugins/jetpack/modules/theme-tools/compat/twentysixteen3a05.css?ver=4.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/plugins/jetpack/_inc/genericons/genericons/genericons128b.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='../../wp-content/themes/twentysixteen/style167b.css?ver=4.6' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='jetpack_css-css'  href='../../wp-content/plugins/jetpack/css/jetpack3a05.css?ver=4.2.2' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://stuartsierra.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'>
</head>

<body class="archive date paged paged-3 date-paged-3 hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></p>
											<p class="site-description">From programming to everything else</p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-menu-container"><ul id="menu-main-menu" class="primary-menu"><li id="menu-item-635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../about-me.html">About Me</a></li>
<li id="menu-item-633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../writing.html">Writing</a></li>
<li id="menu-item-634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../presentations.html">Presentations</a></li>
<li id="menu-item-636" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../software.html">Software</a></li>
<li id="menu-item-637" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../contact.html">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

											<div class="header-image">
					<a href="../../index.html" rel="home">
						<img src="../../wp-content/uploads/2015/12/header.jpg" srcset="https://stuartsierra.com/wp-content/uploads/2015/12/header-300x70.jpg 300w, https://stuartsierra.com/wp-content/uploads/2015/12/header-768x179.jpg 768w, https://stuartsierra.com/wp-content/uploads/2015/12/header-1024x239.jpg 1024w, https://stuartsierra.com/wp-content/uploads/2015/12/header.jpg 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 81vw, (max-width: 1362px) 88vw, 1200px" width="1200" height="280" alt="Digital Digressions by Stuart Sierra">
					</a>
				</div><!-- .header-image -->
					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Year: 2009</h1>			</header><!-- .page-header -->

			
<article id="post-227" class="post-227 post type-post status-publish format-standard hentry category-programming tag-clojure tag-lisp">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../04/29/clojure-talk.html" rel="bookmark">CANCELED &#8211; Clojure Talk May 12</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><strong>CANCELED:</strong> My presentation is canceled.  LispNYC will still meet at the Sunburnt Cow, 137 Avenue C, and I&#8217;ll be there to talk about Clojure.  But no slides, no video, etc.  My presentation is postponed to the June meeting.</p>
<hr />
<p>I&#8217;ll be talking about my work with <a href="http://www.clojure.org/">Clojure</a> at LispNYC on the evening of Tuesday, May 12.   Time and location to be announced.   Slides and (hopefully) video available after the fact.</p>
<p>Possible topics:</p>
<ul>
<li>Why Java + Lisp was such a great idea</li>
<li>Using Clojure with Java libraries like Hadoop &amp; Solr</li>
<li>Deploying a web server with Clojure and Restlet</li>
<li>Clojure libraries I&#8217;ve written, such as test-is</li>
</ul>
<p><strong>Official announcement with time &amp; location</strong>:<br />
from <a href="http://www.lispnyc.org/">LispNYC.org</a></p>
<p>Stuart Sierra presents: Implementing AltLaw.org in Clojure</p>
<p>This talk demonstrates the power of combining Clojure with large Java frameworks, such as:</p>
<ul>
<li>Hadoop &#8211; distributed map/reduce processing</li>
<li>Solr &#8211; text indexing/searching</li>
<li>Restlet &#8211; REST-oriented web framework</li>
<li>Jets3t &#8211; Amazon S3</li>
</ul>
<p>Join us from 7:00 &#8211; 9:00 at Trinity Church in the heart of the East Village. Afterward the discussion will continue at the Sunburnt Cow on 9th and C.</p>
<p>Directions to Trinity:</p>
<p>Trinity Lutheran<br />
602 E. 9th St. &amp; Ave B., on Tompkins Square Park<br />
<a rel="nofollow" href="http://trinitylowereastside.org/" target="_blank">http://trinitylowereastside.org/</a></p>
<p>From N,R,Q,W (8th Street NYU Stop) and the 4,5 (Astor Street<br />
Stop):<br />
Walk East 4 blocks on St. Marks, cross Tompkins Square Park.</p>
<p>From F&amp;V (2nd Ave Stop):<br />
Walk E one or two blocks, turn north for 8 short blocks</p>
<p>From L (1st Ave Stop):<br />
Walk E one block, turn sounth for 5 short blocks</p>
<p>The M9 bus line drops you off at the doorstep and the M15 is near get<br />
off on St. Marks &amp; 1st)</p>
<p>To get there by car, take the FDR (East River Drive) to Houston then go NW till you&#8217;re at 9th &amp; B.  Week-night parking isn&#8217;t bad at all, but if you&#8217;re paranoid about your Caddy or in a hurry, there is a parking garage on 9th between 1st and 3rd Ave.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../04/29/clojure-talk.html" rel="bookmark"><time class="entry-date published" datetime="2009-04-29T11:13:24+00:00">April 29, 2009</time><time class="updated" datetime="2009-05-11T19:15:25+00:00">May 11, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/clojure.html" rel="tag">Clojure</a>, <a href="../../tag/lisp.html" rel="tag">Lisp</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-211" class="post-211 post type-post status-publish format-standard hentry category-programming tag-clojure tag-lisp">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../02/22/its-about-the-libraries.html" rel="bookmark">It&#8217;s About the Libraries</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>There&#8217;s a big &#8216;ol <a href="http://groups.google.com/group/comp.lang.lisp/browse_thread/thread/0d05837df1efe075">thread</a> going on down at comp.lang.lisp about <a href="http://clojure.org/">Clojure</a> vs. Common Lisp. I&#8217;m biased, of course, but I have to say that Clojure and Rich Hickey are holding their own against some of the top c.l.l. flamers.</p>
<p>But all the arguments about functional programming, software transactional memory, and reader macros miss what was, for me, the biggest reason to switch to Clojure.  <em>It&#8217;s about the libraries, stupid.</em>  Building on the JVM and providing direct access to Java classes/methods was the best decision in Clojure&#8217;s design.  &#8216;Cause if it&#8217;s ever been done, anywhere, by anyone, someone&#8217;s done it in Java.  Twice.</p>
<p>A few years ago, I tried to solve the Common Lisp library problem by writing a <a href="../../software/perl-in-lisp.html">bridge from CL to Perl 5</a>, and was laughed out of town.  Rich Hickey, I&#8217;m told, spent years trying to bridge CL to Java, and never got very far.  But Clojure works, and it works great.  It&#8217;s a Lisp with a squintillion libraries.  Who else can claim that?</p>
<p>So, if I wanted Lisp with Java libraries, why not use <a href="http://www.gnu.org/software/kawa/">Kawa</a> or <a href="http://common-lisp.net/project/armedbear/">ABCL</a> &#8230; or heck, <a href="http://jruby.codehaus.org/">JRuby</a>?  Those are all fine projects, but they all suffer from mismatches between the &#8220;source&#8221; language (Scheme, CL, Ruby) and the &#8220;host&#8221; language (Java).  There is never a one-to-one mapping between types in the source language and types in the host language.  So you end up needing conversions like <a href="http://trac.common-lisp.net/armedbear/browser/trunk/abcl/examples/abcl/javacall_from_lisp/lispfunctions.lisp">jclass/jmethod/jcall</a> (ABCL) or <a href="http://www.gnu.org/software/kawa/internals/low-level.html">primitive-static-method</a> (Kawa).  (<a href="http://jruby.codehaus.org/Java+Integration">JRuby is slightly better</a>, but only because Ruby is closer to Java than CL/Scheme.)</p>
<p>Clojure doesn&#8217;t have this problem because it was designed from the ground up for the JVM.  Clojure strings are java.lang.String, Clojure maps are java.util.Map, even Clojure functions are java.lang.Runnable (and java.lang.Callable).  This makes it supremely easy to mix-n-match Clojure code with Java libraries and vice-versa.  I know, because every day I use Clojure with complex Java libraries like <a href="http://hadoop.apache.org/core/">Hadoop</a>, <a href="http://www.restlet.org/">Restlet</a>, <a href="http://lucene.apache.org/">Lucene</a>, and <a href="http://lucene.apache.org/solr/">Solr</a>.  Everything just works.  I don&#8217;t have to write any foreign-function interfaces or bridge code.  In fact, using Java libraries in Clojure is often easier than using them in Java!</p>
<p>Clojure may not be a programming language for the <a href="http://www.paulgraham.com/hundred.html">next hundred years</a>, as Arc aspires to be.  But it&#8217;s a great language if you want to get stuff done right now.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../02/22/its-about-the-libraries.html" rel="bookmark"><time class="entry-date published" datetime="2009-02-22T01:46:03+00:00">February 22, 2009</time><time class="updated" datetime="2009-02-22T01:46:40+00:00">February 22, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/clojure.html" rel="tag">Clojure</a>, <a href="../../tag/lisp.html" rel="tag">Lisp</a></span><span class="comments-link"><a href="../02/22/its-about-the-libraries.html#comments">11 Comments<span class="screen-reader-text"> on It&#8217;s About the Libraries</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-207" class="post-207 post type-post status-publish format-standard hentry category-programming tag-altlaw tag-hadoop">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../02/05/207.html" rel="bookmark">Hadoop Meetup 2/10</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Just a little self-promotion: I&#8217;ll be presenting at the <a href="http://www.meetup.com/Hadoop-NYC/">New York Hadoop User Group</a> on Tuesday, February 10 at 6:30.  I&#8217;ll talk about how I use Hadoop for <a href="http://www.altlaw.org/">AltLaw.org</a>, including citation linking, distributed indexing, and using <a href="http://www.clojure.org/">Clojure</a> with Hadoop.</p>
<p><strong>Update 2/28:</strong> My <a href="http://files.meetup.com/1228907/altlaw-hadoop-meetup-2009-02-10-public.pdf">slides from this presentation</a> are available from the <a href="http://www.meetup.com/Hadoop-NYC/files/">Meetup group files</a>.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../02/05/207.html" rel="bookmark"><time class="entry-date published" datetime="2009-02-05T13:30:11+00:00">February 5, 2009</time><time class="updated" datetime="2009-02-28T13:07:02+00:00">February 28, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/altlaw.html" rel="tag">AltLaw</a>, <a href="../../tag/hadoop.html" rel="tag">Hadoop</a></span><span class="comments-link"><a href="../02/05/207.html#comments">4 Comments<span class="screen-reader-text"> on Hadoop Meetup 2/10</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-199" class="post-199 post type-post status-publish format-standard hentry category-uncategorized tag-altlaw">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../01/22/dirty-necessary-money.html" rel="bookmark">Dirty Necessary Money</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Up at Cornell, Tom Bruce has a post about the problem of <a href="http://blog.law.cornell.edu/tbruce/2009/01/14/sustainability/">funding open access to legal materials</a>. This brings to mind a conversation I had with a doctor friend recently about <a href="http://www.altlaw.org/">AltLaw</a>. My friend, accustomed to the open-access requirements of NIH grants, was frankly shocked that there are no comparable rules for legal decisions.</p>
<figure id="attachment_201" style="width: 512px" class="wp-caption alignnone"><a href="http://www.ncbi.nlm.nih.gov/pubmed/"><img class="size-full wp-image-201" title="NIH Public Access Policy" src="../../wp-content/uploads/2009/01/nihdeposit.gif" alt="NIH Public Access Policy" width="512" height="103" srcset="https://stuartsierra.com/wp-content/uploads/2009/01/nihdeposit.gif 512w, https://stuartsierra.com/wp-content/uploads/2009/01/nihdeposit-300x60.gif 300w" sizes="(max-width: 512px) 85vw, 512px" /></a><figcaption class="wp-caption-text">Screenshot: PubMed home page</figcaption></figure>
<p>A related problem is how to make people aware of what free services are available. AltLaw has been around for two years, and while traffic has grown steadily, it has not gotten as much attention as commercial startups operating similar services. Admittedly, we have done no advertising at all, and that&#8217;s our fault. &#8220;If you build it they will come&#8221; we thought, naïvely. But how would we advertise? I&#8217;m a programmer; the people I work with are law professors. None of us know the first thing about marketing, and quite frankly, none of us care. Seen in that light, <a href="http://blog.law.cornell.edu/blog/2009/01/21/lii-launches-free-lawyer-directory-service/">Cornell&#8217;s recent partnership with Justia.com</a> is a smart move that will benefit everyone working on open-access law, since it will expose more lawyers to the idea.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../01/22/dirty-necessary-money.html" rel="bookmark"><time class="entry-date published" datetime="2009-01-22T23:03:45+00:00">January 22, 2009</time><time class="updated" datetime="2009-04-03T13:25:01+00:00">April 3, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/uncategorized.html" rel="category tag">Uncategorized</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/altlaw.html" rel="tag">AltLaw</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-195" class="post-195 post type-post status-publish format-standard hentry category-programming tag-clojure tag-lisp tag-rspec tag-testing">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../01/18/tests-are-code.html" rel="bookmark">Tests Are Code</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>It&#8217;s interesting to see the first signs of <a href="http://dablog.rubypal.com/2008/11/30/probative-programming-the-physical-unification-of-code-and-tests">rebellion against RSpec</a>. I jumped on the RSpec bandwagon when it first appeared, mostly so I wouldn&#8217;t have to write &#8220;assert_equals&#8221; all the time. But while I liked and used RSpec, I don&#8217;t think it made my tests any better. If anything, they were a little bit worse. I found myself testing things that were not really relevant to the code I was writing, asserting obvious things like &#8220;a newly-created record should be empty.&#8221;</p>
<p>When I got interested in <a href="http://clojure.org/">Clojure</a>, one of the first things I wrote was a testing library called &#8220;test-is&#8221;. I borrowed from a lot of Common Lisp testing frameworks, especially the idea of a generic assertion macro called &#8220;is&#8221;. It looks like this:</p>
<pre>(deftest test-my-function
  (is (= 7 (my-function 3 4)))
  (is (even? (my-function 10 2))))</pre>
<p>This is pretty basic, but it&#8217;s sufficient for low-level unit testing. So far, I think that&#8217;s how the library has been typically used. There have been occasional requests, however, for RSpec-style syntax. I can see how this would be useful for testing at a level higher than individual functions, but I have come to believe that the added semantics of RSpec are not really necessary.</p>
<p>Right now, the test-is library is built on the same abstractions as Clojure itself. Tests are functions, so you can apply all the same tools that already exist for handling functions. Tests can be called by name, organized into namespaces, and composed. There is almost no extra bookkeeping code that I need to write to make all of this work.</p>
<p>In contrast, if I were to adopt the RSpec style, I would have to write code to call, store, and organize tests. That&#8217;s more work for me, and ultimately restricts the flexibility of the library for people who use it. Furthermore, RSpec has its own set of semantics, above and beyond the language itself, which must be learned.</p>
<p>This is my first experience supporting a library for anyone other than myself, and I don&#8217;t want to force anyone into a particular style. A library like RSpec is a complete environment that attempts to anticipate all possible usage scenarios, so it&#8217;s grown correspondingly complicated.  I want to provide a set of small tools, that can be combined with other tools to do interesting things. </p>
<p>Of course, by making that decision I&#8217;m already dictating, to some extent, how the library can be used. But really, what I&#8217;m trying to do is set limits for myself. I will commit to providing a flexible, extensible set of functions and macros for writing tests. I am explicitly not trying to provide a complete testing framework. If someone wants to build an RSpec-style framework on top of test-is, more power to them. I will happily try to make test-is easier to integrate into that framework.</p>
<p>But there&#8217;s one other thing that struck me about that article that I linked to at the beginning &#8212; the idea of putting tests and code in the same file. I think that&#8217;s a great idea, and Clojure comes ready-made to implement it. Clojure supports the idea of &#8220;metadata&#8221; on definitions. You can attach a set of arbitrary properties to any object, without affecting the value of that object.</p>
<p>It&#8217;s easy to attach a test function as metadata on a definition in Clojure, but the syntax is a little ugly, and there is no easy way to remove the tests from production code. So I came up with in addition to my library, the &#8220;with-test&#8221; macro. It lets you wrap any definition in a set of tests. It looks like this:</p>
<pre>(with-test
 (defn add-numbers [a b]
   (+ a b))
 (is (= 7 (add-numbers 3 4)))
 (is (= -4 (add-numbers -6 2))))</pre>
<p>This is equivalent to adding metadata to the function, but the syntax is a little cleaner. I&#8217;ve also added a global variable, &#8220;*load-tests*&#8221;, which can be set to false to omit tests when loading production code.</p>
<p>I like having each function right next to its tests. It makes it easier to remember to write tests, and easier to see how the function is supposed to behave. So to the extent that test-is will promote a testing style, this is it.  But it&#8217;s a pretty radical departure from the traditional style of testing, so I&#8217;m not sure how others will react to it.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../01/18/tests-are-code.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-01-18T12:04:21+00:00">January 18, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/clojure.html" rel="tag">Clojure</a>, <a href="../../tag/lisp.html" rel="tag">Lisp</a>, <a href="../../tag/rspec.html" rel="tag">RSpec</a>, <a href="../../tag/testing.html" rel="tag">testing</a></span><span class="comments-link"><a href="../01/18/tests-are-code.html#comments">6 Comments<span class="screen-reader-text"> on Tests Are Code</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-192" class="post-192 post type-post status-publish format-standard hentry category-programming tag-data-structures">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../01/10/data-are-data.html" rel="bookmark">Data Are Data, Not Objects</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>A small post for the new year (in which I have resolved to write more).</p>
<p>The standard introduction to object-oriented programming teaches you to create a class for each type of thing you want to deal with in your program. So if you&#8217;re writing a payroll program, you would have an Employee class, a Department class, and so on. The methods of those classes are supposed to model some sort of real-world behavior. You quickly realize that real-world objects are not so easily separable, so you learn about inheritance, abstract classes, polymorphism, virtual methods, overloading, and all the other gobbledygook that is supposed to bring object-oriented programming closer to the real world, but usually just confuses programmers.</p>
<p>Like many others, I became suspicious of this technique after trying to use library classes that did not provide the methods I needed. Subclassing is supposed to provide a way to add new behavior to classes, but it is often thwarted by private variables, final methods, and the admonition that modifying the internals of a class is &#8220;breaking encapsulation.&#8221;</p>
<p>The joy I experienced when I first discovered Perl was due in large part to the realization that it provided just a few simple data structures &#8212; scaler, array, hash &#8212; that were sufficient for any sort of object I wanted to model. Moreover, every CPAN library used those same data structures, so it was easy to link them together and extend them where I needed to.  Even Perl &#8220;objects&#8221; are just data structures with some added functionality.  I was similarly delighted by Clojure&#8217;s abstract data structures &#8212; list, vector, map, set &#8212; all of which are manipulated with a few generic functions.</p>
<p>The problem with defining your own classes is that every class you define has its own, unique semantics. Someone who wants to use your class has to learn those semantics, which may not be suitable for how they want to use it. I once read (I don&#8217;t remember where) that classes are good for modeling abstract, mathematical entities like sets, but they fall apart when trying to model the real world.</p>
<p>So here&#8217;s a slightly radical notion: <em>don&#8217;t use classes to model the real world</em>. Treat data as data. Every modern programming language has at least a few built-in data structures that usually provide all the semantics you need. Even Java, the prince of &#8220;everything is a class&#8221; languages, has an excellent collections library. If your program has a list of names, you don&#8217;t need to invent a NameList object, just use a List&lt;String&gt;.  Don&#8217;t hide it behind a specialized interface. The interface is already there: it&#8217;s a List.  If somebody wants to sort the list, they already know how to do it, and you never have to write a SortedNameList class.</p>
<p>This is an important idea behind JSON (and YAML) &#8212; the semantics are deliberately limited, so you know what to expect. That&#8217;s also why JSON is popular for sharing data between programs written in different languages &#8212; the semantics are simple, so they&#8217;re easy to implement.  The point is, <em>don&#8217;t create new semantics</em> when you don&#8217;t need to &#8212; you&#8217;re only making it harder to understand, extend, and reuse your code.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="../01/10/data-are-data.html" rel="bookmark"><time class="entry-date published" datetime="2009-01-10T18:54:40+00:00">January 10, 2009</time><time class="updated" datetime="2009-01-10T18:55:50+00:00">January 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../../tag/data-structures.html" rel="tag">data structures</a></span><span class="comments-link"><a href="../01/10/data-are-data.html#comments">5 Comments<span class="screen-reader-text"> on Data Are Data, Not Objects</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><a class="prev page-numbers" href="2.html">Previous page</a>
<a class='page-numbers' href='../index.html'><span class="meta-nav screen-reader-text">Page </span>1</a>
<a class='page-numbers' href='2.html'><span class="meta-nav screen-reader-text">Page </span>2</a>
<span class='page-numbers current'><span class="meta-nav screen-reader-text">Page </span>3</span></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://stuartsierra.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section><section id="text-4" class="widget widget_text">			<div class="textwidget"><ul>
<li><a href="http://feeds2.feedburner.com/StuartSierra" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="../../comments/feed" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
</ul>
<ul>
<li><a href="https://twitter.com/stuartsierra">Twitter</a></li>
<li><a href="https://github.com/stuartsierra">GitHub</a></li>
</ul></div>
		</section><section id="tag-widget-2" class="widget TagWidget"><h2 class="widget-title">Clojure Do’s and Don’ts</h2><ul class = "posts-by-tag-list"><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-883"><a class = "posts-by-tag-item-title" href="../../2015/08/25/clojure-donts-lazy-effects.html">Clojure Don’ts: Lazy Effects</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-877"><a class = "posts-by-tag-item-title" href="../../2015/08/10/clojure-donts-redundant-map.html">Clojure Don’ts: Redundant map</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-870"><a class = "posts-by-tag-item-title" href="../../2015/06/16/clojure-donts-single-branch-if.html">Clojure Don’ts: Single-branch if</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-854"><a class = "posts-by-tag-item-title" href="../../2015/06/10/clojure-donts-heisenparameter.html">Clojure Don’ts: The Heisenparameter</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-849"><a class = "posts-by-tag-item-title" href="../../2015/06/01/clojure-donts-optional-arguments-with-varargs.html">Clojure Don’ts: Optional Arguments with Varargs</a></li><li class="posts-by-tag-item Clojure do's and don'ts errors" id="posts-by-tag-item-836"><a class = "posts-by-tag-item-title" href="../../2015/05/27/clojure-uncaught-exceptions.html">Clojure Do’s: Uncaught Exceptions</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-831"><a class = "posts-by-tag-item-title" href="../../2015/05/17/clojure-record-constructors.html">Record Constructors</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-826"><a class = "posts-by-tag-item-title" href="../../2015/05/10/clojure-namespace-aliases.html">Clojure Do’s: Namespace Aliases</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-820"><a class = "posts-by-tag-item-title" href="../../2015/05/02/clojure-donts-isa.html">Clojure Don’ts: isa?</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-812"><a class = "posts-by-tag-item-title" href="../../2015/04/26/clojure-donts-concat.html">Clojure Don’ts: Concat</a></li></ul></section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../../about-me.html">About Me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../../writing.html">Writing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../../presentations.html">Presentations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../../software.html">Software</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../../contact.html">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="../../index.html" rel="home">Digital Digressions by Stuart Sierra</a></span>
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

	<div style="display:none">
	<div class="grofile-hash-map-55878d0196b91803f9cb2c372b0551d3">
	</div>
	</div>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201635'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2016Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/jetpack/modules/wpgroho167b.js?ver=4.6'></script>
<script type='text/javascript' src='../../wp-content/themes/twentysixteen/js/skip-link-focus-fix8de4.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentysixteen/js/functions8de4.js?ver=20160816'></script>
<script type='text/javascript' src='../../wp-includes/js/wp-embed.min167b.js?ver=4.6'></script>
<script type='text/javascript' src='https://stats.wp.com/e-201635.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.2.2',blog:'2702563',post:'0',tz:'-4',srv:'stuartsierra.com'} ]);
	_stq.push([ 'clickTrackerInit', '2702563', '0' ]);
</script>
</body>

<!-- Mirrored from stuartsierra.com/2009/page/3 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 17:02:41 GMT -->
</html>

<!-- Dynamic page generated in 0.367 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-09-02 12:59:48 -->

<!-- Compression = gzip -->