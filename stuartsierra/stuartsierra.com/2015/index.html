<!DOCTYPE html>
<html lang="en-US" class="no-js">

<!-- Mirrored from stuartsierra.com/2015/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 16:56:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>2015 &#8211; Digital Digressions by Stuart Sierra</title>
<link rel='dns-prefetch' href='http://s0.wp.com/'>
<link rel='dns-prefetch' href='http://secure.gravatar.com/'>
<link rel='dns-prefetch' href='http://fonts.googleapis.com/'>
<link rel='dns-prefetch' href='http://s.w.org/'>
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Feed" href="http://feeds2.feedburner.com/StuartSierra" />
<link rel="alternate" type="application/rss+xml" title="Digital Digressions by Stuart Sierra &raquo; Comments Feed" href="../comments/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stuartsierra.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='twentysixteen-jetpack-css'  href='../wp-content/plugins/jetpack/modules/theme-tools/compat/twentysixteen3a05.css?ver=4.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../wp-content/plugins/jetpack/_inc/genericons/genericons/genericons128b.css?ver=3.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='../wp-content/themes/twentysixteen/style167b.css?ver=4.6' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://stuartsierra.com/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='jetpack_css-css'  href='../wp-content/plugins/jetpack/css/jetpack3a05.css?ver=4.2.2' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://stuartsierra.com/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'>
</head>

<body class="archive date hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="../index.html" rel="home">Digital Digressions by Stuart Sierra</a></p>
											<p class="site-description">From programming to everything else</p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-menu-container"><ul id="menu-main-menu" class="primary-menu"><li id="menu-item-635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../about-me.html">About Me</a></li>
<li id="menu-item-633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../writing.html">Writing</a></li>
<li id="menu-item-634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../presentations.html">Presentations</a></li>
<li id="menu-item-636" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../software.html">Software</a></li>
<li id="menu-item-637" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../contact.html">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

											<div class="header-image">
					<a href="../index.html" rel="home">
						<img src="../wp-content/uploads/2015/12/header.jpg" srcset="https://stuartsierra.com/wp-content/uploads/2015/12/header-300x70.jpg 300w, https://stuartsierra.com/wp-content/uploads/2015/12/header-768x179.jpg 768w, https://stuartsierra.com/wp-content/uploads/2015/12/header-1024x239.jpg 1024w, https://stuartsierra.com/wp-content/uploads/2015/12/header.jpg 1200w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 81vw, (max-width: 1362px) 88vw, 1200px" width="1200" height="280" alt="Digital Digressions by Stuart Sierra">
					</a>
				</div><!-- .header-image -->
					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Year: 2015</h1>			</header><!-- .page-header -->

			
<article id="post-913" class="post-913 post type-post status-publish format-standard hentry category-programming tag-clojure tag-clojurescript">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="12/31/clojure-2015-year-in-review.html" rel="bookmark">Clojure 2015 Year in Review</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Another year, another year-in-review post. To be honest, I feel like any attempt I make to summarize what happened in the Clojure world this year is largely moot. Clojure has gotten so big, so — dare I say it? — <em>mainstream</em> that I can&#8217;t even begin to keep up with all the interesting things that are happening. But it&#8217;s a tradition, so I&#8217;ll stick to it. Once again, here is my incomplete, thoroughly-biased list of notable Clojurey things this year.</p>
<p>As I said of JVM Clojure in 2012, I think I can safely say that 2015 was the year <strong>ClojureScript grew up</strong>. It got a real release number, improved REPL support, and the ability to compile itself. But you don&#8217;t have to take my word for it: David Nolen has written his own <a href="http://swannodette.github.io/2015/12/23/year-in-review/">ClojureScript Year in Review</a>.</p>
<h2>Clojure in the World</h2>
<p>We already knew Clojure was being used at big companies like Walmart and Amazon. Based on public job postings, we&#8217;ve also seen places like Reuters, Capital One, and Oracle interested in Clojure developers.</p>
<p>Big corporations tend to be cagey about their technology choices, but Walmart&#8217;s Anthony Marcar came to Clojure/West to talk about how they do <a href="https://www.youtube.com/watch?v=av9Xi6CNqq4">Clojure at Scale</a>.</p>
<p>In other big-tech news, <a href="https://wit.ai/blog/2015/01/05/wit-ai-facebook">Facebook acquired Wit.ai</a>, a Clojure startup that released an open-source <a href="https://duckling.wit.ai/">library to parse structured data</a> from text. Clojure early-adopter Prismatic <a href="https://web.archive.org/web/20151224104148/http://prismatic.github.io/next-chapter/">pivoted away</a> from its popular news-recommendation app to focus full-time on the A.I. business as well.</p>
<h2>Language, Tools, and Libraries</h2>
<p><a href="http://blog.cognitect.com/blog/2015/6/30/clojure-17">Clojure 1.7 was released</a>, bringing <a href="http://clojure.org/transducers">Transducers</a> and the much-anticipated <a href="http://clojure.org/reader#The%20Reader--Reader%20Conditionals">Reader Conditionals</a> to support mixed Clojure-ClojureScript projects. Writing cross-platform libraries suddenly got easier. A bunch of popular Clojure libraries were ported to ClojureScript, including <a href="https://github.com/clojure/test.check">test.check</a>, <a href="https://github.com/clojure/tools.reader">tools.reader</a>, and my <a href="https://github.com/stuartsierra/component">Component</a>.</p>
<p><a href="https://github.com/clojure/core.async">core.async</a> got a major new release, with the added features <a href="http://clojure.github.io/core.async/#clojure.core.async/promise-chan">promise-chan</a>, <a href="http://clojure.github.io/core.async/#clojure.core.async/offer!">offer!</a>, and <a href="http://clojure.github.io/core.async/#clojure.core.async/poll!">poll!</a>.</p>
<p>The big news on the tooling front was the 1.0 release of <a href="https://cursive-ide.com/">Cursive</a>, the first commercial IDE for Clojure. On the open-source side, both <a href="http://lighttable.com/">Light Table</a> and <a href="https://github.com/clojure-emacs/cider">CIDER</a> got major new releases.</p>
<p>In the ClojureScript tooling world, <a href="https://github.com/bhauman/lein-figwheel">Figwheel</a> and <a href="https://github.com/bhauman/devcards">Devcards</a> really took off this year.</p>
<p><a href="https://clojars.org/">Clojars</a> started getting <a href="https://www.bountysource.com/teams/clojars/updates/1-thank-you-for-supporting-clojars">financial support</a> from the community, and <a href="http://cljsjs.github.io/">CLJSJS</a> started offering JavaScript libraries conveniently packaged for ClojureScript and the Google Closure Compiler.</p>
<h2>Books and Docs</h2>
<p><a href="http://blog.cognitect.com/blog/2015/11/10/lets-make-clojure-org-better">clojure.org went open-source</a> for contributions from the community.</p>
<p>New books: <a href="https://pragprog.com/book/vmclojeco/clojure-applied">Clojure Applied</a> (<a href="10/18/clojure-applied-review.html">my review</a>), <a href="http://www.braveclojure.com/">Clojure for the Brave and True</a> in print, <a href="http://shop.oreilly.com/product/0636920034292.do">Living Clojure</a>, <a href="http://clojurerecipes.net/">Clojure Recipes</a>, and many more.</p>
<h2>Events and Community</h2>
<p>The <a href="http://clojurians.net/">Clojurians Slack</a> community rocketed from just an idea to over four thousand members. If you don&#8217;t care for Slack, the <a href="http://irc.lc/freenode/clojure/irctc">#clojure IRC</a> channel on <a href="http://www.freenode.org/">Freenode</a> is still going.</p>
<p>The <a href="https://groups.google.com/forum/#!forum/clojure">Clojure mailing list</a> hit <strong>ten thousand</strong> members.</p>
<p>At Clojure/conj this year, we had the first-ever <strong>Datomic conference</strong>. You can binge-watch Clojure conference videos (Clojure/conj, EuroClojure, and Clojure/West) on the <a href="https://www.youtube.com/user/ClojureTV">ClojureTV YouTube channel</a>. Also check out <a href="https://skillsmatter.com/conferences/6861-clojure-exchange-2015">Clojure eXchange</a> and <a href="http://www.clojured.de/archive/2015/">:clojureD</a>.</p>
<p>Clojure is attracting some interest from academic computer science, including a new paper on <a href="http://blog.acolyer.org/2015/11/27/hamt/">optimizing immutable hash maps</a>.</p>
<h2>Summary</h2>
<p>There&#8217;s not much more to say. Or rather, there is very much more to say than what I can capture in a single post. Clojure is here to stay. Let&#8217;s enjoy it.</p>
<p>Thanks to David Nolen, Alex Miller, Timothy Baldridge, Carin Meier, and Daemian Mack for their help preparing this post.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="12/31/clojure-2015-year-in-review.html" rel="bookmark"><time class="entry-date published updated" datetime="2015-12-31T17:31:48+00:00">December 31, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/clojurescript.html" rel="tag">ClojureScript</a></span><span class="comments-link"><a href="12/31/clojure-2015-year-in-review.html#comments">2 Comments<span class="screen-reader-text"> on Clojure 2015 Year in Review</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-903" class="post-903 post type-post status-publish format-standard hentry category-programming tag-clojure tag-review">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="10/18/clojure-applied-review.html" rel="bookmark">An Opinionated Review of Clojure Applied</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p> Why write a book about open-source software? (Not for the money. Trust me.) I&#8217;ve seen far too many “technical books” that merely regurgitate the documentation of a bunch of open source libraries. I&#8217;m happy to say that <i>Clojure Applied</i>, by my friends and colleagues Alex Miller and Ben Vandgrift, is <b>not</b> in this category. They sent me a free copy in return for review, so here it is. </p>
<p> As my other colleague Luke VanderHart pointed out in his <a href="https://www.youtube.com/watch?v=2YmmfS5YTQ0">recent talk at ClojureTRE</a>, the biggest gap in written material about about Clojure &#x2014; and a good candidate for the source of most “documentation” complaints &#x2014; has been the lack of <b>narrative</b>. Clojure has great reference documentation, and lots of Clojure libraries come with great tutorials, but there aren’t many comprehensive stories about building complete applications. </p>
<p> <i>Clojure Applied</i> tells a story about how to write Clojure applications. This is not just a book about Clojure, it&#8217;s a book about how to write software which assumes you&#8217;re going to use Clojure to do it. <i>Clojure Applied</i> would probably not be a good choice as your <b>first</b> Clojure book, although it would be an excellent book to read <b>while</b> you are learning Clojure. </p>
<p> The narrative develops like most successful Clojure programs: from the bottom up, starting with data. Instead of primitives or abstract concepts, the first chapter begins with modeling domain data using maps and records. This is the right place to start, and I could wish this chapter went into even more detail. For example, I would have liked to see a comparison of nested versus “flat” map structures (“flatter” is easier to work with). </p>
<p> Domain modeling is a difficult concept to describe, so I can’t fairly criticize Ben &amp; Alex’s efforts here, but I do think they lose their way slightly by introducing Prismatic&#8217;s Schema library very early on. To be sure, Schema is a powerful library that a lot of Clojure developers find useful. But placed here, along with discussions of type-based dispatch, it leaves the reader with the idea that types are a central feature of domain modeling in Clojure. I disagree. Thinking in terms of types early in the design process often leads to unnecessarily restrictive choices, producing inflexible designs. </p>
<p> Further compounding the error of focusing on types, this chapter wanders into more advanced topics such as protocols and multimethods. There&#8217;s even a technique for dynamically extending protocols at runtime, an advanced tactic I would not recommend under most circumstances. </p>
<p> Embracing the possibilities of design in a dynamically-typed language requires a willingness to work with values whose types may be unknown <b>at certain points</b>. For example, the type of the “accumulator” value in a transducer is hard to define, because for most transducers its type is irrelevant. The ability to <b>ignore</b> types when they are not needed is what makes dynamic languages so expressive. </p>
<p> On the other hand, I have seen many large Clojure programs drift into incomprehensibility by failing to constrain their types in any way, passing complex nested structures everywhere. In this case, the lack of validation leads to a kind of inside-out spaghetti code in which it’s impossible to deduce the type of something by reading the code which uses it. Given the choice between these two extremes, “over-typed” code will be easier to untangle than “under-typed,” so perhaps introducing validation early is a good idea. </p>
<p> Moving along, Chapter Two covers the other Clojure collection types. This is beginner material, but presented in terms of how and why you might want to use each type of collection. This chapter also covers some common beginner questions, such as how to search a sequential collection. Another advanced topic which I would not recommend &#x2014; defining a new collection type implementing Clojure&#8217;s interfaces &#x2014; sneaks in here, but I&#8217;ll give it a pass because it helps you understand the collection interfaces. </p>
<p> Chapter Three zeroes in on the sequential collections, in particular the sequence library. Here the narrative is about <b>combining</b> sequence functions, in particular the pattern of filter-map-reduce. This pattern is so fundamental that an experienced Clojure programmer (or Lisp, or any functional language) might not even think about it, but it’s a critical step to becoming an effective user of Clojure. This chapter also introduces Transducers. Even though Transducers might be considered an “advanced” topic, I think they belong here alongside sequences. The concepts are the same, and Transducers are really quite straightforward if you’re only looking, as this chapter does, at how to <b>use</b> them and not how they are implemented. </p>
<p> Part II, “Applications,” is probably the best section in the book. This is the critical piece missing from the first-round books about Clojure (including my own). How do you start <b>combining</b> all these little functional pieces into a working program? </p>
<p> The first chapter in this section describes mutable references with the most comprehensible real-world example I have seen, and also includes an excellent explanation of <b>identity</b> versus <b>state</b>. Another chapter describes all the various techniques for using multiple cores, including an important discussion of <b>pipelines</b> and core.async <code>go</code> blocks as <b>processes</b>. </p>
<p> Then there’s an entire chapter devoted to <b>components</b> as they are expressed in namespaces. Ben &amp; Alex introduce all the concepts necessary to design and implement components <b>without</b> using my <a href="https://github.com/stuartsierra/component">Component</a> library, which I think is a smart choice. The Component library arrives in the following chapter, along with the idea of composing an application out of many components. </p>
<p> Part III, “Practices,” covers testing, output formats, and deployment. </p>
<p> The chapter on testing has a good description of the trade-offs between example-based and property-based testing, but doesn’t delve into the more difficult areas of integration or whole-system testing. Advanced testing techniques really deserve an entire book of their own. </p>
<p> “Formatting data” covers the usual suspects: JSON, EDN, and Transit. In my experience, the choice of data format is usually dictated by external constraints, but this chapter at least makes the trade-offs clear. </p>
<p> Finally, the chapter on deployment is a high-level overview of everything from GitHub to Elastic Beanstalk. There’s even a discussion of open-source licensing and contributor agreements. Heroku gets the most attention, which makes sense for a book targeted at mostly-beginners, but at least this chapter introduces some of the concerns one might want to think about when choosing a deployment platform. </p>
<p> After the last chapter, there’s a bonus pair of appendices. The first briefly covers the “roots” of Clojure, with links to source material. The second summarizes some principal motivations behind Clojure’s design as a guide to “Thinking in Clojure.” This latter section might have been more usefully incorporated into the text of the book, but that&#8217;s harder to write and can tend toward the preachy, so I can’t complain. </p>
<p> Circling back to where I started, <i>Clojure Applied</i> is a great book to read <b>while</b> learning Clojure. It’s not a language tutorial. It’s not stuffed with revolutionary ideas. Most importantly, it doesn’t try to do too much. It’s just solid, practical advice. Even the recommendations I disagree with are not bad ideas, just different preferences. Follow Ben &amp; Alex’s advice while building your first Clojure program, and you’ll have a solid foundation to explore your own ideas and preferences. </p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="10/18/clojure-applied-review.html" rel="bookmark"><time class="entry-date published" datetime="2015-10-18T12:29:00+00:00">October 18, 2015</time><time class="updated" datetime="2015-10-19T08:11:46+00:00">October 19, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/review.html" rel="tag">review</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-883" class="post-883 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="08/25/clojure-donts-lazy-effects.html" rel="bookmark">Clojure Don’ts: Lazy Effects</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<link href="../css/org-clojure-1.css" type="text/css" rel="stylesheet">
<p> This is probably my number one <a href="../tag/dos-and-donts.html">Clojure Don’t</a>. </p>
<p> Laziness is often useful. It allows you to express “infinite” computations, and only pay for as much of the computation as you need. </p>
<p> Laziness also allows you to express computations without specifying <b>when</b> they should happen. And that’s a problem when you add side-effects. </p>
<p> By definition, a side-effect is something that changes the world outside your program. You almost certainly want it to happen at a specific time. Laziness takes away your control of when things happen. </p>
<p> So the rule is simple: <b>Never mix side effects with lazy operations.</b> </p>
<p> For example, if you need to do something to every element in a collection, you might reach for <code>map</code>. If thing you’re doing is a pure function, that’s fine. But if the thing you’re doing has side effects, <code>map</code> can lead to very unexpected results. </p>
<p> For example, this is a common new-to-Clojure mistake: </p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span>take 5 <span class="org-rainbow-delimiters-depth-2">(</span>map prn <span class="org-rainbow-delimiters-depth-3">(</span>range 10<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p> which prints </p>
<pre class="example">
0
1
2
3
4
5
6
7
8
9
</pre>
<p> This is the old “chunked sequence” conundrum. Like many other lazy sequence functions, <code>map</code> has an optimization which allows it to evaluate batches of 32 elements at a time. </p>
<p> Then there’s the issue of lazy sequences not being evaluated at all. For example: </p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-2">(</span>map prn <span class="org-rainbow-delimiters-depth-3">[</span>0 1 2 3 4 5 6 7 8 9 10<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>println <span class="org-string">"Hello, world!"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p> which prints only: </p>
<pre class="example">
Hello, world!
</pre>
<p> You might get the advice that you can “force” a lazy sequence to be evaluated with <code>doall</code> or <code>dorun</code>. There are also snippets floating around that purport to “unchunk” a sequence. </p>
<p> In my opinion, the presence of <code>doall</code>, <code>dorun</code>, or even “unchunk” is almost always a sign that something never should have been a lazy sequence in the first place. </p>
<p> Only use pure functions with the lazy sequence operations like <code>map</code>, <code>filter</code>, <code>take-while</code>, etc. When you need side effects, use one of these alternatives: </p>
<ul class="org-ul">
<li><code>doseq</code>: good default choice, clearly indicates side effects</li>
<li><code>run!</code>: new in Clojure 1.7, can take the place of <code>(dorun (map ...))</code></li>
<li><code>reduce</code>, <code>transduce</code>, or something built on them</li>
</ul>
<p> The last requires some more explanation. <code>reduce</code> and <code>transduce</code> are both <b>non-lazy</b> ways of consuming sequences or collections. As such, they are technically safe to use with side-effecting operations. </p>
<p> For example, this composition of <code>take</code> and <code>map</code>: </p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span>transduce <span class="org-rainbow-delimiters-depth-2">(</span>comp <span class="org-rainbow-delimiters-depth-3">(</span>take 5<span class="org-rainbow-delimiters-depth-3">)</span>
                 <span class="org-rainbow-delimiters-depth-3">(</span>map prn<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
           conj
           <span class="org-rainbow-delimiters-depth-2">[]</span>
           <span class="org-rainbow-delimiters-depth-2">(</span>range 10<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p> only prints 5 elements of the sequence, as requested: </p>
<pre class="example">
0
1
2
3
4
</pre>
<p> The single-argument version of <code>map</code> returns a transducer which calls its function once for each element. The <code>map</code> transducer can’t control <b>when</b> the function gets evaluated — that’s in the hands of <code>transduce</code>, which is eager (non-lazy). The single-argument <code>take</code> limits the reduction to the first five elements. </p>
<p> As a general rule, I would <b>not</b> recommend using side-effecting operations in transducers. But if you know that the transducer will be used <b>only</b> in non-lazy operations — such as <code>transduce</code>, <code>run!</code>, or <code>into</code> — then it may be convenient. </p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defn</span> <span class="org-function-name">operation</span> <span class="org-rainbow-delimiters-depth-2">[</span>input<span class="org-rainbow-delimiters-depth-2">]</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">do something with input, return result</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>str <span class="org-string">"Result for "</span> input<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>prn <span class="org-rainbow-delimiters-depth-2">(</span>into #<span class="org-rainbow-delimiters-depth-3">{}</span>
           <span class="org-rainbow-delimiters-depth-3">(</span>comp <span class="org-rainbow-delimiters-depth-4">(</span>take 3<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>map operation<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
           <span class="org-rainbow-delimiters-depth-3">(</span>range 100<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p> <code>reduce</code>, <code>transduce</code>, and <code>into</code> are useful when you need to collect the return value of the side-effecting operation. </p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="08/25/clojure-donts-lazy-effects.html" rel="bookmark"><time class="entry-date published" datetime="2015-08-25T12:35:00+00:00">August 25, 2015</time><time class="updated" datetime="2015-08-25T12:37:30+00:00">August 25, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="08/25/clojure-donts-lazy-effects.html#comments">5 Comments<span class="screen-reader-text"> on Clojure Don’ts: Lazy Effects</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-877" class="post-877 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="08/10/clojure-donts-redundant-map.html" rel="bookmark">Clojure Don’ts: Redundant map</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<link href="../css/org-clojure-1.css" type="text/css" rel="stylesheet">
<p>Today’s <a href="../tag/dos-and-donts.html">Clojure Don’t</a> is the opposite side of the coin to the <a href="06/10/clojure-donts-heisenparameter.html">heisenparameter</a>.</p>
<p>If you have an operation on a single object, you don’t need to define another version just to operate on a collection of those objects.</p>
<p>That is, if you have a function like this:</p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defn</span> <span class="org-function-name">process-thing</span> <span class="org-rainbow-delimiters-depth-2">[</span>thing<span class="org-rainbow-delimiters-depth-2">]</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">process one thing</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p>There is no reason to also write this:</p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defn</span> <span class="org-function-name">process-many-things</span> <span class="org-rainbow-delimiters-depth-2">[</span>things<span class="org-rainbow-delimiters-depth-2">]</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>map process-thing things<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
<p>The idiom “map a function over a collection” is so universal that any Clojure programmer should be able to write it without thinking twice.</p>
<p>Having a separate definition for processing a group of things implies that there is something special about processing a group instead of a single item. (For example, a more efficient batch implementation.) If that’s the case, then by all means write the batch version as well. But if not, then a function like <code>process-many-things</code> just clutters up your code while providing no benefit.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="08/10/clojure-donts-redundant-map.html" rel="bookmark"><time class="entry-date published" datetime="2015-08-10T09:00:00+00:00">August 10, 2015</time><time class="updated" datetime="2015-08-10T08:57:43+00:00">August 10, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="08/10/clojure-donts-redundant-map.html#comments">4 Comments<span class="screen-reader-text"> on Clojure Don’ts: Redundant map</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-870" class="post-870 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="06/16/clojure-donts-single-branch-if.html" rel="bookmark">Clojure Don’ts: Single-branch if</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>A short <a href="../tag/dos-and-donts.html">Clojure don’t</a> for today. This one is my style preference.</p>
<p>You have a single expression which should run if a condition is true, otherwise return <code>nil</code>.</p>
<p>Most Clojure programmers would probably write this:</p>
<div class="org-src-container">
<pre class="src src-clojure">(when (condition? ...)
  (then-expression ...))
</pre>
</div>
<p>But you could also write this:</p>
<div class="org-src-container">
<pre class="src src-clojure">(if (condition? ...)
  (then-expression ...)
  nil)
</pre>
</div>
<p>Or even this, because the “else” branch of <code>if</code> defaults to <code>nil</code>:</p>
<div class="org-src-container">
<pre class="src src-clojure">(if (condition? ...)
  (then-expression ...))
</pre>
</div>
<p>There’s an argument to be made for any one of these.</p>
<p>The second variant, <code>if ... nil</code>, makes it very explicit that you want to return <code>nil</code>. The <code>nil</code> might be semantically meaningful in this context instead of just a “default” value.</p>
<p>Some people like the third variant, <code>if</code> with no “else” branch, because they think <code>when</code> is only for side-effects, leaving the single-branch <code>if</code> for “pure” code.</p>
<p>But for me it comes down, as usual, to readability.</p>
<p>The vast majority of the time, <code>if</code> contains both “then” and “else” expressions.</p>
<p>Sometimes a long “then” branch leaves the “else” branch dangling below it. I’m expecting this, so when I read an <code>if</code> my eyes automatically scan down to find the “else” branch.</p>
<p>If I see an <code>if</code> but don’t find an “else” branch, I get momentarily confused. Maybe a line is missing or the code is mis-indented.</p>
<p>Likewise, if I see an <code>if</code> explicitly returing <code>nil</code>, it looks like a mistake because I know it could be written as <code>when</code>. This is a universal pattern in Clojure: lots of expressions (<code>cond</code>, <code>get</code>, <code>some</code>) return <code>nil</code> as their default case, so it’s jarring to see a literal <code>nil</code> as a return value.</p>
<p>So my preferred style is the first version. In general terms:</p>
<p><b>An <code>if</code> should always have both “then” and “else” branches.</b><br />
Use <code>when</code> for a condition which should return <code>nil</code> in the negative case.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="06/16/clojure-donts-single-branch-if.html" rel="bookmark"><time class="entry-date published" datetime="2015-06-16T20:25:00+00:00">June 16, 2015</time><time class="updated" datetime="2015-06-16T20:28:42+00:00">June 16, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="06/16/clojure-donts-single-branch-if.html#comments">3 Comments<span class="screen-reader-text"> on Clojure Don’ts: Single-branch if</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-854" class="post-854 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="06/10/clojure-donts-heisenparameter.html" rel="bookmark">Clojure Don’ts: The Heisenparameter</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>A <a href="../tag/dos-and-donts.html">pattern</a> I particularly dislike: Function parameters which may or may not be collections.</p>
<p>Say you have a function that does some operation on a batch of inputs:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">process-batch</span> [items]
  <span class="org-comment-delimiter">;; </span><span class="org-comment">... do some work with items ...</span>
  )
</pre>
</div>
<p>Say further that, for this process, the fundamental unit of work is always a batch. Processing one thing is just a batch size of one.</p>
<p>Lots of processes are like this: I/O (arrays of bytes), database APIs (transactions of rows), and so on.</p>
<p>But maybe you have lots of code that mostly deals with one thing at a time, and only occasionally makes a larger batch. In the name of “convenience,” people write things like this:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">wrap-coll</span>
  <span class="org-doc">"Wraps argument in a vector if it is not already a collection."</span>
  [arg]
  (<span class="org-keyword">if</span> (coll? arg)
    arg
    [arg]))

(<span class="org-keyword">defn</span> <span class="org-function-name">process</span>
  <span class="org-doc">"Processes a single input or a collection of inputs."</span>
  [input]
  (process-batch (wrap-coll input)))
</pre>
</div>
<p>This is prevalent in dynamically-typed languages of all stripes. I think it’s a case of mistakenly choosing convenience over clarity.</p>
<p>This leads easily to mistakes like iterating over a collection, calling <code>process</code> on each element, when the same work could be done more efficiently in a batch.</p>
<p>Now imagine reading some code when you encounter a call to this function:</p>
<div class="org-src-container">
<pre class="src src-clojure">(process stuff)
</pre>
</div>
<p>Is <code>stuff</code> a collection or a single object? Who knows?</p>
<p>When you read code, there’s a kind of ad-hoc, mental type-inference going on. This is true regardless of what typing scheme your language uses. Narrowing the range of possible types something can be makes it easier to reason about what type it actually is.</p>
<p>The more general principle:<br />
<b>Be explicit about your types even when they’re dynamic.</b></p>
<p>If the operation requires a collection, then pass it a collection every time.</p>
<p>A &#8220;helper&#8221; like <code>wrap-coll</code> saves you a whopping two characters over just wrapping the argument in a literal vector, at the cost of lost clarity and specificity.</p>
<hr />
<p>If you often forget to wrap the argument correctly, consider adding a type check:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">process-batch</span> [items]
  {<span class="org-clojure-keyword">:pre</span> [(coll? items)]}
  <span class="org-comment-delimiter">;; </span><span class="org-comment">... </span>
  )
</pre>
</div>
<hr />
<p>If there actually are two distinct operations, one for a single object and one for a batch, then they should be separate functions:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">process-one</span> [item]
  <span class="org-comment-delimiter">;; </span><span class="org-comment">...</span>
  )

(<span class="org-keyword">defn</span> <span class="org-function-name">process-batch</span> [items]
  <span class="org-comment-delimiter">;; </span><span class="org-comment">...</span>
  )
</pre>
</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="06/10/clojure-donts-heisenparameter.html" rel="bookmark"><time class="entry-date published" datetime="2015-06-10T13:18:00+00:00">June 10, 2015</time><time class="updated" datetime="2015-06-16T13:40:55+00:00">June 16, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="06/10/clojure-donts-heisenparameter.html#comments">5 Comments<span class="screen-reader-text"> on Clojure Don’ts: The Heisenparameter</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-849" class="post-849 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="06/01/clojure-donts-optional-arguments-with-varargs.html" rel="bookmark">Clojure Don’ts: Optional Arguments with Varargs</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Another <a href="../tag/dos-and-donts.html">Clojure don’t</a> today. This one is a personal style preference, but I’ll try to back it up.</p>
<p>Say you want to define a function with a mix of required and optional arguments. I’ve often seen this:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">foo</span> [a &amp; [b]]
  (println <span class="org-string">"Required argument a is"</span> a)
  (println <span class="org-string">"Optional argument b is"</span> b))
</pre>
</div>
<p>This is a clever trick. It works because <code>&amp; [b]</code> destructures the sequence of arguments passed to the function after <code>a</code>. Sequential destructuring doesn’t require that the number of symbols match the number of elements in the sequence being bound. If there are more symbols than values, they are bound to <code>nil</code>.</p>
<div class="org-src-container">
<pre class="src src-clojure">(foo 3 4)
<span class="org-comment-delimiter">;; </span><span class="org-comment">Required argument a is 3</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Optional argument b is 4</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; nil</span>

(foo 9)
<span class="org-comment-delimiter">;; </span><span class="org-comment">Required argument a is 9</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Optional argument b is nil</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; nil</span>
</pre>
</div>
<p>I don’t like this pattern for two reasons.</p>
<p><b>One.</b> Because it’s variable arity, the function <code>foo</code> accepts <b>any</b> number of arguments. You won’t get an error if you call it with extra arguments, they will just be silently ignored.</p>
<div class="org-src-container">
<pre class="src src-clojure">(foo 5 6 7 8)
<span class="org-comment-delimiter">;; </span><span class="org-comment">Required argument a is 5</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Optional argument b is 6</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; nil</span>
</pre>
</div>
<p><b>Two.</b> It muddles the intent. The presence of <code>&amp;</code> in the parameter vector suggests that this function is <b>meant</b> to be variable-arity. Reading this code, I might start to wonder why. Or I might miss the <code>&amp;</code> and think this function is meant to be called with a sequence as its second argument.</p>
<p>A couple more lines make it clearer:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defn</span> <span class="org-function-name">foo</span>
  ([a]
   (foo a <span class="org-constant">nil</span>))
  ([a b]
   (println <span class="org-string">"Required argument a is"</span> a)
   (println <span class="org-string">"Optional argument b is"</span> b)))
</pre>
</div>
<p>The intent here is unambiguous: The function takes either one or two arguments, with <code>b</code> defaulting to <code>nil</code>. Trying to call it with more than two arguments will throw an exception, telling you that you did something wrong.</p>
<p>And one more thing: it’s faster. Variable-arity function calls have to allocate a sequence to hold the arguments, then go through <code>apply</code>. Timothy Baldridge did a quick <a href="https://gist.github.com/halgari/5d7780e6f068ae217bb2">performance comparison</a> showing that calls to a function with multiple, fixed arities can be much faster than variable-arity (varargs) function calls.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="06/01/clojure-donts-optional-arguments-with-varargs.html" rel="bookmark"><time class="entry-date published" datetime="2015-06-01T20:34:00+00:00">June 1, 2015</time><time class="updated" datetime="2015-06-06T08:11:16+00:00">June 6, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="06/01/clojure-donts-optional-arguments-with-varargs.html#comments">4 Comments<span class="screen-reader-text"> on Clojure Don’ts: Optional Arguments with Varargs</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-836" class="post-836 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts tag-errors">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="05/27/clojure-uncaught-exceptions.html" rel="bookmark">Clojure Do’s: Uncaught Exceptions</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Some more <a href="../tag/dos-and-donts.html">do’s and don’ts</a> for you. This time it’s a ‘do.’</p>
<p>In the JVM, when an exception is thrown on a thread other than the main thread, and nothing is there to catch it, <b>nothing happens</b>. The thread <b>dies silently</b>.</p>
<p>This is bad news if you needed that thread to do some work. If all the worker threads die, the application could appear to be “up” but cease to do any useful work. And you’ll never know why.</p>
<p>In Clojure, this could happen on any thread you created with <code>core.async/thread</code>, a worker thread used by <code>core.async/go</code>, or a thread that was created for you by a Java framework such as a Servlet container.</p>
<p>One solution is to just wrap the body of every <code>thread</code> or <code>go</code> in a try/catch block. There are good reasons for doing this: you can get fine-grained control over how exceptions are handled. But it’s easy to forget, and it’s tedious to repeat if you can’t do anything useful with the exception besides log it.</p>
<p>So at a minimum, I recommend always including this snippet of code somewhere in the start-up procedure of your application:</p>
<div class="org-src-container">
<pre class="src src-clojure"><span class="org-comment-delimiter">;; </span><span class="org-comment">Assuming require [clojure.tools.logging :as log]</span>
(<span class="org-type">Thread</span>/<span class="org-clojure-interop-method">setDefaultUncaughtExceptionHandler</span>
 (reify <span class="org-type">Thread$UncaughtExceptionHandler</span>
   (<span class="org-clojure-interop-method">uncaughtException</span> [_ thread ex]
     (<span class="org-type">log</span>/error ex <span class="org-string">"Uncaught exception on"</span> (<span class="org-clojure-interop-method">.getName</span> thread)))))
</pre>
</div>
<p>This bit of code has saved my bacon more times than I can count.</p>
<p>This is a <b>global, JVM-wide</b> setting. There can be only one default uncaught exception handler. Individual Threads and ThreadGroups can have their own handlers, which get called in preference to the default handler. See <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler-java.lang.Thread.UncaughtExceptionHandler-">Thread.setDefaultUncaughtExceptionHandler</a>.</p>
<p>I’ve tried more aggressive measures, such as terminating the whole JVM process on any uncaught exception. While I think this is technically the correct thing to do, it turns out to be annoying in development.</p>
<p>Also annoying is the fact that some Java frameworks are <b>designed</b> to let threads fail silently. They just allocate a new thread in a pool and keep going. If your application is logging lots of uncaught exceptions but appears to be working normally, look to your container framework to see if that’s expected behavior.</p>
<div id="outline-container-unnumbered-1" class="outline-2">
<h2 id="unnumbered-1">The Hidden Future</h2>
<div id="text-unnumbered-1" class="outline-text-2">
<p>Another wrinkle: exceptions inside a <code>future</code> are <b>always</b> caught by the Future. The exception will not be thrown until something calls <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html#get--">Future.get</a> (<code>deref</code> in Clojure).</p>
<p>Be aware that <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#submit-java.util.concurrent.Callable-">ExecutorService.submit</a> returns a Future, so if you’re using an ExecutorService you need to make sure something is eventually going to consume that Future to surface any exceptions it might have caught.</p>
<p>The parent interface <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html#execute-java.lang.Runnable-">Executor.execute</a> does <b>not</b> return a Future, so exeptions <b>will</b> reach the default exception handler.</p>
<p>Using ExecutorService.submit instead of Executor.execute was a bug in very early versions of core.async.</p>
</div>
</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="05/27/clojure-uncaught-exceptions.html" rel="bookmark"><time class="entry-date published" datetime="2015-05-27T06:09:00+00:00">May 27, 2015</time><time class="updated" datetime="2015-05-28T03:40:38+00:00">May 28, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a>, <a href="../tag/errors.html" rel="tag">errors</a></span><span class="comments-link"><a href="05/27/clojure-uncaught-exceptions.html#comments">3 Comments<span class="screen-reader-text"> on Clojure Do’s: Uncaught Exceptions</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-831" class="post-831 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="05/17/clojure-record-constructors.html" rel="bookmark">Record Constructors</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Some more <a href="../tag/dos-and-donts.html">Clojure Do’s and Don’ts</a> for you. This week: record constructors.</p>
<div id="outline-container-unnumbered-1" class="outline-2">
<h2 id="unnumbered-1">Don’t use interop syntax to construct records</h2>
<div id="text-unnumbered-1" class="outline-text-2">
<p><code>defrecord</code> and <code>deftype</code> compile into Java classes, so it is possible to construct them using Java interop syntax like this:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defrecord</span> <span class="org-type">Foo</span> [a b])

(<span class="org-type">Foo.</span> 1 2)
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; #user.Foo{:a 1, :b 2}</span>
</pre>
</div>
<p>But don’t do that. Interop syntax is for interop with Java libraries.</p>
<p>Since Clojure version 1.3, <code>defrecord</code> and <code>deftype</code> automatically create constructor functions. Use those instead of interop syntax.</p>
<p>For records, you get two constructor functions: one taking the values of fields in the same order they appear in the <code>defrecord</code>:</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defrecord</span> <span class="org-type">Foo</span> [a b])

(-&gt;Foo 1 2)
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; #user.Foo{:a 1 :b 2}</span>
</pre>
</div>
<p>And another taking a map whose keys are keywords with the same names as the fields:</p>
<div class="org-src-container">
<pre class="src src-clojure">(map-&gt;Foo {<span class="org-clojure-keyword">:b</span> 4 <span class="org-clojure-keyword">:a</span> 3})
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; #user.Foo{:a 3, :b 4}</span>
</pre>
</div>
<p><code>deftype</code> only creates the first kind of constructor, taking the field values in order.</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">deftype</span> <span class="org-type">Bar</span> [c d])

(-&gt;Bar 5 6)
<span class="org-comment-delimiter">;;</span><span class="org-comment">=&gt; #&lt;Bar user.Bar@2168aeae&gt;</span>
</pre>
</div>
<p>Constructor functions are ordinary Clojure Vars. You can pass them to higher-order functions and <code>:require :as</code> or <code>:refer</code> them into other namespaces just like any other function.</p>
</div>
</div>
<div id="outline-container-unnumbered-2" class="outline-2">
<h2 id="unnumbered-2">Do add your own constructor functions</h2>
<div id="text-unnumbered-2" class="outline-text-2">
<p>You cannot modify or customize the constructor functions that <code>defrecord</code> and <code>deftype</code> create.</p>
<p>It’s common to want additional functionality around constructing an object, such as validation and default values. To get this, just define your own constructor function that wraps the default constructor.</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">defrecord</span> <span class="org-type">Customer</span> [id name phone email])

(<span class="org-keyword">defn</span> <span class="org-function-name">customer</span>
  <span class="org-doc">"Creates a new customer record."</span>
  [{<span class="org-clojure-keyword">:keys</span> [name phone email]}]
  {<span class="org-clojure-keyword">:pre</span> [(string? name)
         (valid-phone? phone)
         (valid-email? email)]}
  (-&gt;Customer (next-id) name phone email))
</pre>
</div>
<p>You don’t necessarily have to use <code>:pre</code> conditions for validation; that’s just how I wrote this example.</p>
<p>It’s up to you to maintain a convention to always use your custom constructor function instead of the automatically-generated one.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup></p>
<p>I frequently define a custom constructor function for every new record type, even if I don&#8217;t need it right away. That gives me a place to add validation later, without searching for and replacing every instance of the default constructor.</p>
<p>Even custom constructor functions should follow the <a href="http://www.ibm.com/developerworks/library/j-jtp0618/">rules for safe constructors</a>. In general, that means no side effects and no “publishing” the object to another place before the constructor is finished. Keep the “creation” of an object (the constructor) separate from “starting” or “using” it, whatever that means for your code.</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes:</h2>
<div id="text-footnotes">
<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup></p>
<p class="footpara">Theoretically you could make the default constructors private with <code>alter-meta!</code>, but I&#8217;ve never found it necessary.</p>
</div>
</div>
</div>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="05/17/clojure-record-constructors.html" rel="bookmark"><time class="entry-date published" datetime="2015-05-17T05:19:00+00:00">May 17, 2015</time><time class="updated" datetime="2015-05-18T05:51:25+00:00">May 18, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="05/17/clojure-record-constructors.html#comments">2 Comments<span class="screen-reader-text"> on Record Constructors</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-826" class="post-826 post type-post status-publish format-standard hentry category-programming tag-clojure tag-dos-and-donts">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="05/10/clojure-namespace-aliases.html" rel="bookmark">Clojure Do’s: Namespace Aliases</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Third in a <a href="../tag/dos-and-donts.html">series</a>, this time with some style recommendations based on my personal experience.</p>
<p>In a small project with only a few developers, things like naming and style conventions don’t matter all that much, because almost everyone has worked with almost all of the code.</p>
<p>With bigger teams and bigger code bases — think tens of developers, tens of thousands of lines of Clojure — there’s a good chance that anyone reading the code has <b>never seen it before</b>. For that reader, a few conventions can be a big help.</p>
<p>Optimizing for readability usually means being more verbose. Don’t abbreviate unless you have to.</p>
<p>It also means optimizing for a reader who is not necessarily familiar with the entire code base, or even an entire file. They’ve just jumped to a function definition in their editor, or maybe pulled a line number from a stack trace. They don’t want to take the time to understand how all the different namespaces relate. They especially don’t want to have to scroll to the top of the file just to see where a symbol comes from.</p>
<p>So these conventions are about maximizing readability at the level of single function definitions. Yes, it means more typing. But it makes it much easier to navigate a large codebase maintained by multiple people.</p>
<p>As a general first rule, make the alias the same as the namespace name with the leading parts removed.</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span class="org-keyword">ns</span> <span class="org-type">com.example.application</span>
  (<span class="org-clojure-keyword">:require</span>
   [<span class="org-type">clojure.java.io</span> <span class="org-clojure-keyword">:as</span> io]
   [<span class="org-type">clojure.string</span> <span class="org-clojure-keyword">:as</span> string]))
</pre>
</div>
<p>Keep enough trailing parts to make each alias unique. Did you know that namespace aliases can have dots in them?</p>
<div class="org-src-container">
<pre class="src src-clojure">[<span class="org-type">clojure.data.xml</span> <span class="org-clojure-keyword">:as</span> <span class="org-type">data.xml</span>]
[<span class="org-type">clojure.xml</span> <span class="org-clojure-keyword">:as</span> xml]
</pre>
</div>
<p>Eliminate redundant words such as “core” and “clj” in aliases.</p>
<div class="org-src-container">
<pre class="src src-clojure">[clj-http <span class="org-clojure-keyword">:as</span> http]
[<span class="org-type">clj-time.core</span> <span class="org-clojure-keyword">:as</span> time]
[<span class="org-type">clj-time.format</span> <span class="org-clojure-keyword">:as</span> <span class="org-type">time.format</span>]
</pre>
</div>
<p>Use <code>:refer</code> sparingly. It’s good for symbols that have no alphabetic characters, such as <code>&gt;! &lt;! &gt;!! &lt;!!</code> in <code>core.async</code>, or heavily-used macros such those in <code>clojure.test</code>.</p>
<p>You can combine <code>:refer</code> and <code>:as</code> in the same <code>:require</code> clause.</p>
<div class="org-src-container">
<pre class="src src-clojure">[<span class="org-type">clojure.core.async</span> <span class="org-clojure-keyword">:as</span> async <span class="org-clojure-keyword">:refer</span> [&lt;! &gt;! &lt;!! &gt;!!]]
[<span class="org-type">clojure.test</span> <span class="org-clojure-keyword">:refer</span> [deftest is]]
</pre>
</div>
<p>There are always exceptions. For example, some namespaces have established conventions for aliases:</p>
<div class="org-src-container">
<pre class="src src-clojure">[<span class="org-type">datomic.api</span> <span class="org-clojure-keyword">:as</span> d]
</pre>
</div>
<p>Whatever convention you adopt, use consistent aliases everywhere. This makes it easier for everyone to read the code, and makes it possible to search for code with text-based tools like <code>grep</code>.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=49&amp;d=blank&amp;r=g' srcset='https://secure.gravatar.com/avatar/55878d0196b91803f9cb2c372b0551d3?s=98&amp;d=blank&amp;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="../author/stuart.html">Stuart</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="05/10/clojure-namespace-aliases.html" rel="bookmark"><time class="entry-date published" datetime="2015-05-10T16:23:00+00:00">May 10, 2015</time><time class="updated" datetime="2015-05-11T07:45:35+00:00">May 11, 2015</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../category/programming.html" rel="category tag">Programming</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="../tag/clojure.html" rel="tag">Clojure</a>, <a href="../tag/dos-and-donts.html" rel="tag">do's and don'ts</a></span><span class="comments-link"><a href="05/10/clojure-namespace-aliases.html#comments">4 Comments<span class="screen-reader-text"> on Clojure Do’s: Namespace Aliases</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><span class='page-numbers current'><span class="meta-nav screen-reader-text">Page </span>1</span>
<a class='page-numbers' href='page/2.html'><span class="meta-nav screen-reader-text">Page </span>2</a>
<a class="next page-numbers" href="page/2.html">Next page</a></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-3" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://stuartsierra.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section><section id="text-4" class="widget widget_text">			<div class="textwidget"><ul>
<li><a href="http://feeds2.feedburner.com/StuartSierra" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="../comments/feed" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
</ul>
<ul>
<li><a href="https://twitter.com/stuartsierra">Twitter</a></li>
<li><a href="https://github.com/stuartsierra">GitHub</a></li>
</ul></div>
		</section><section id="tag-widget-2" class="widget TagWidget"><h2 class="widget-title">Clojure Do’s and Don’ts</h2><ul class = "posts-by-tag-list"><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-883"><a class = "posts-by-tag-item-title" href="08/25/clojure-donts-lazy-effects.html">Clojure Don’ts: Lazy Effects</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-877"><a class = "posts-by-tag-item-title" href="08/10/clojure-donts-redundant-map.html">Clojure Don’ts: Redundant map</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-870"><a class = "posts-by-tag-item-title" href="06/16/clojure-donts-single-branch-if.html">Clojure Don’ts: Single-branch if</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-854"><a class = "posts-by-tag-item-title" href="06/10/clojure-donts-heisenparameter.html">Clojure Don’ts: The Heisenparameter</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-849"><a class = "posts-by-tag-item-title" href="06/01/clojure-donts-optional-arguments-with-varargs.html">Clojure Don’ts: Optional Arguments with Varargs</a></li><li class="posts-by-tag-item Clojure do's and don'ts errors" id="posts-by-tag-item-836"><a class = "posts-by-tag-item-title" href="05/27/clojure-uncaught-exceptions.html">Clojure Do’s: Uncaught Exceptions</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-831"><a class = "posts-by-tag-item-title" href="05/17/clojure-record-constructors.html">Record Constructors</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-826"><a class = "posts-by-tag-item-title" href="05/10/clojure-namespace-aliases.html">Clojure Do’s: Namespace Aliases</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-820"><a class = "posts-by-tag-item-title" href="05/02/clojure-donts-isa.html">Clojure Don’ts: isa?</a></li><li class="posts-by-tag-item Clojure do's and don'ts" id="posts-by-tag-item-812"><a class = "posts-by-tag-item-title" href="04/26/clojure-donts-concat.html">Clojure Don’ts: Concat</a></li></ul></section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-635"><a href="../about-me.html">About Me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-633"><a href="../writing.html">Writing</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-634"><a href="../presentations.html">Presentations</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-636"><a href="../software.html">Software</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-637"><a href="../contact.html">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
			
			<div class="site-info">
								<span class="site-title"><a href="../index.html" rel="home">Digital Digressions by Stuart Sierra</a></span>
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

	<div style="display:none">
	<div class="grofile-hash-map-55878d0196b91803f9cb2c372b0551d3">
	</div>
	</div>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201635'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2016Sepaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/wpgroho167b.js?ver=4.6'></script>
<script type='text/javascript' src='../wp-content/themes/twentysixteen/js/skip-link-focus-fix8de4.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/themes/twentysixteen/js/functions8de4.js?ver=20160816'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min167b.js?ver=4.6'></script>
<script type='text/javascript' src='https://stats.wp.com/e-201635.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.2.2',blog:'2702563',post:'0',tz:'-4',srv:'stuartsierra.com'} ]);
	_stq.push([ 'clickTrackerInit', '2702563', '0' ]);
</script>
</body>

<!-- Mirrored from stuartsierra.com/2015/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Sep 2016 16:56:59 GMT -->
</html>

<!-- Dynamic page generated in 0.430 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-09-02 11:09:23 -->

<!-- Compression = gzip -->